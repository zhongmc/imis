webpackJsonp([0],{"+gN6":function(e,t,n){var i={"./App":"M93x","./App.vue":"M93x","./assets/logo.png":"7Otq","./assets/scrolltop.png":"O4gh","./assets/userFace.jpg":"MObZ","./components/HelloWorld":"gORT","./components/HelloWorld.vue":"gORT","./components/HomeFoot":"f6n+","./components/HomeFoot.vue":"f6n+","./components/HomeHeader":"byf9","./components/HomeHeader.vue":"byf9","./components/HomeMenu":"nf7z","./components/HomeMenu.vue":"nf7z","./components/budget/BudgetBasic":"NC9U","./components/budget/BudgetBasic.vue":"NC9U","./components/budget/BudgetCollect":"n5Dk","./components/budget/BudgetCollect.vue":"n5Dk","./components/budget/CommonBudget":"k6ib","./components/budget/CommonBudget.vue":"k6ib","./components/budget/DepBudgetTable":"agwU","./components/budget/DepBudgetTable.vue":"agwU","./components/budget/ExpenseBudget":"no6E","./components/budget/ExpenseBudget.vue":"no6E","./components/budget/ProjectBudget":"N7pn","./components/budget/ProjectBudget.vue":"N7pn","./components/chat/Chat":"T5Y6","./components/chat/Chat.vue":"T5Y6","./components/chat/FriendChat":"ngyR","./components/chat/FriendChat.vue":"ngyR","./components/chat/Notification":"Gpj+","./components/chat/Notification.vue":"Gpj+","./components/custom/CustomContactor":"K1Mp","./components/custom/CustomContactor.vue":"K1Mp","./components/custom/CustomContractor":"KBu4","./components/custom/CustomContractor.vue":"KBu4","./components/custom/CustomMain":"HYVu","./components/custom/CustomMain.vue":"HYVu","./components/custom/CustomMana":"cPUQ","./components/custom/CustomMana.vue":"cPUQ","./components/emp/EmpAdv":"ABUp","./components/emp/EmpAdv.vue":"ABUp","./components/emp/EmpBasic":"+sH/","./components/emp/EmpBasic.vue":"+sH/","./components/project/CommonItem":"HxTD","./components/project/CommonItem.vue":"HxTD","./components/project/CostItems-1":"oVJh","./components/project/CostItems-1.vue":"oVJh","./components/project/PrjBasic":"qNjJ","./components/project/PrjBasic.vue":"qNjJ","./components/project/PrjBudget":"4ft9","./components/project/PrjBudget.vue":"4ft9","./components/project/PrjManMonth":"sbZ9","./components/project/PrjManMonth.vue":"sbZ9","./components/system/SysBasic":"fc7a","./components/system/SysBasic.vue":"fc7a","./components/system/SysBudget":"oDJ2","./components/system/SysBudget.vue":"oDJ2","./components/system/SysCfg":"ubks","./components/system/SysCfg.vue":"ubks","./components/system/SysData":"UK/j","./components/system/SysData.vue":"UK/j","./components/system/SysHr":"ewEk","./components/system/SysHr.vue":"ewEk","./components/system/SysInit":"agXO","./components/system/SysInit.vue":"agXO","./components/system/SysLog":"ZDkW","./components/system/SysLog.vue":"ZDkW","./components/system/basic/DepMana":"FvOz","./components/system/basic/DepMana.vue":"FvOz","./components/system/basic/ECMana":"5xQo","./components/system/basic/ECMana.vue":"5xQo","./components/system/basic/JobTitleMana":"c98W","./components/system/basic/JobTitleMana.vue":"c98W","./components/system/basic/MenuRole":"eLaH","./components/system/basic/MenuRole.vue":"eLaH","./components/system/basic/PosMana":"/LNZ","./components/system/basic/PosMana.vue":"/LNZ","./components/system/budget/budgetDef":"3GGU","./components/system/budget/budgetDef.vue":"3GGU","./components/system/budget/budgetType":"y19v","./components/system/budget/budgetType.vue":"y19v","./components/system/budget/costDef":"qGup","./components/system/budget/costDef.vue":"qGup","./components/system/budget/costGroup":"GrqC","./components/system/budget/costGroup.vue":"GrqC","./lib/sockjs":"BiC4","./lib/sockjs.js":"BiC4","./lib/sockjs.min":"JjIn","./lib/sockjs.min.js":"JjIn","./lib/stomp":"GVqr","./lib/stomp.js":"GVqr","./main":"NHnr","./main.js":"NHnr","./pages/Home":"HXef","./pages/Home.vue":"HXef","./pages/Login":"P7ry","./pages/Login.vue":"P7ry","./router":"YaEn","./router/":"YaEn","./router/index":"YaEn","./router/index.js":"YaEn","./store":"IcnI","./store/":"IcnI","./store/index":"IcnI","./store/index.js":"IcnI","./utils/api":"VsUZ","./utils/api.js":"VsUZ","./utils/filter_utils":"yWql","./utils/filter_utils.js":"yWql","./utils/utils":"oAV5","./utils/utils.js":"oAV5"};function a(e){return n(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="+gN6"},"+sH/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{emps:[],keywords:"",fileUploadBtnText:"导入数据",beginDateScope:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,degrees:[{id:4,name:"大专"},{id:5,name:"本科"},{id:6,name:"硕士"},{id:7,name:"博士"},{id:3,name:"高中"},{id:2,name:"初中"},{id:1,name:"小学"},{id:8,name:"其他"}],deps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,emp:{name:"",gender:"",birthday:"",idCard:"",wedlock:"",nationId:"",nativePlace:"",politicId:"",email:"",phone:"",address:"",departmentId:"",departmentName:"所属部门...",jobLevelId:"",posId:"",engageForm:"",tiptopDegree:"",specialty:"",school:"",beginDate:"",workState:"",workID:"",contractTerm:"",conversionTime:"",notWorkDate:"",beginContract:"",endContract:"",workAge:""},rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],gender:[{required:!0,message:"必填:性别",trigger:"blur"}],birthday:[{required:!0,message:"必填:出生日期",trigger:"blur"}],idCard:[{required:!0,message:"必填:身份证号码",trigger:"blur"},{pattern:/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}$)/,message:"身份证号码格式不正确",trigger:"blur"}],wedlock:[{required:!0,message:"必填:婚姻状况",trigger:"blur"}],nationId:[{required:!0,message:"必填:民族",trigger:"change"}],nativePlace:[{required:!0,message:"必填:籍贯",trigger:"blur"}],politicId:[{required:!0,message:"必填:政治面貌",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"}],address:[{required:!0,message:"必填:联系地址",trigger:"blur"}],departmentId:[{required:!0,message:"必填:部门",trigger:"change"}],jobLevelId:[{required:!0,message:"必填:职称",trigger:"change"}],posId:[{required:!0,message:"必填:职位",trigger:"change"}],engageForm:[{required:!0,message:"必填:聘用形式",trigger:"blur"}],tiptopDegree:[{required:!0,message:"必填:最高学历",trigger:"change"}],specialty:[{required:!0,message:"必填:专业",trigger:"blur"}],workID:[{required:!0,message:"必填:工号",trigger:"blur"}],school:[{required:!0,message:"必填:毕业院校",trigger:"blur"}],beginDate:[{required:!0,message:"必填:入职日期",trigger:"blur"}],conversionTime:[{required:!0,message:"必填:转正日期",trigger:"blur"}],beginContract:[{required:!0,message:"必填:合同起始日期",trigger:"blur"}],endContract:[{required:!0,message:"必填:合同终止日期",trigger:"blur"}],workAge:[{required:!0,message:"必填:工龄",trigger:"blur"}]}}},mounted:function(){this.initData(),this.loadEmps()},methods:{fileUploadSuccess:function(e,t,n){e&&this.$message({type:e.status,message:e.msg}),this.loadEmps(),this.fileUploadBtnText="导入数据"},fileUploadError:function(e,t,n){this.$message({type:"error",message:"导入失败!"}),this.fileUploadBtnText="导入数据"},beforeFileUpload:function(e){this.fileUploadBtnText="正在导入"},exportEmps:function(){window.open("/employee/basic/exportEmp","_parent")},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyEmpData(),this.beginDateScope="",this.loadEmps()},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyEmpData(),this.beginDateScope="",this.loadEmps())},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyEmps:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",n=0;n<e.multipleSelection.length;n++)t+=e.multipleSelection[n].id+",";e.doDelete(t)}).catch(function(){})},deleteEmp:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/employee/basic/emp/"+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){var n=e.data;t.$message({type:n.status,message:n.msg}),t.loadEmps()}})},keywordsChange:function(e){""==e&&this.loadEmps()},searchEmp:function(){this.loadEmps()},currentChange:function(e){this.currentPage=e,this.loadEmps()},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/employee/basic/emp?page="+this.currentPage+"&size=10&keywords="+this.keywords+"&politicId="+this.emp.politicId+"&nationId="+this.emp.nationId+"&posId="+this.emp.posId+"&jobLevelId="+this.emp.jobLevelId+"&engageForm="+this.emp.engageForm+"&departmentId="+this.emp.departmentId+"&beginDateScope="+this.beginDateScope).then(function(n){if(e.tableLoading=!1,n&&200==n.status){var i=n.data;t.emps=i.emps,t.totalCount=i.count}})},addEmp:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.emp.id?(t.tableLoading=!0,t.putRequest("/employee/basic/emp",t.emp).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyEmpData(),n.loadEmps()}})):(t.tableLoading=!0,t.postRequest("/employee/basic/emp",t.emp).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyEmpData(),n.loadEmps()}}))})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},initData:function(){var e=this;this.getRequest("/employee/basic/basicdata").then(function(t){if(t&&200==t.status){var n=t.data;e.nations=n.nations,e.politics=n.politics,e.deps=n.deps,e.positions=n.positions,e.joblevels=n.joblevels,e.emp.workID=n.workID}})},showEditEmpView:function(e){console.log(e),this.dialogTitle="编辑员工",this.emp=e,this.emp.birthday=this.formatDate(e.birthday),this.emp.conversionTime=this.formatDate(e.conversionTime),this.emp.beginContract=this.formatDate(e.beginContract),this.emp.endContract=this.formatDate(e.endContract),this.emp.beginDate=this.formatDate(e.beginDate),this.emp.nationId=e.nation.id,this.emp.politicId=e.politicsStatus.id,this.emp.departmentId=e.department.id,this.emp.departmentName=e.department.name,this.emp.jobLevelId=e.jobLevel.id,this.emp.posId=e.position.id,delete this.emp.workAge,delete this.emp.notWorkDate,this.dialogVisible=!0},showAddEmpView:function(){this.dialogTitle="添加员工",this.dialogVisible=!0;var e=this;this.getRequest("/employee/basic/maxWorkID").then(function(t){t&&200==t.status&&(e.emp.workID=t.data)})},emptyEmpData:function(){this.emp={name:"",gender:"",birthday:"",idCard:"",wedlock:"",nationId:"",nativePlace:"",politicId:"",email:"",phone:"",address:"",departmentId:"",departmentName:"所属部门...",jobLevelId:"",posId:"",engageForm:"",tiptopDegree:"",specialty:"",school:"",beginDate:"",workState:"",workID:"",contractTerm:"",conversionTime:"",notWorkDate:"",beginContract:"",endContract:"",workAge:""}}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[n("div",{staticStyle:{display:"inline"}},[n("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过员工名搜索员工,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchEmp(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n        ")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[n("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n        ")])],1),e._v(" "),n("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[n("el-upload",{staticStyle:{display:"inline"},attrs:{"show-file-list":!1,accept:"application/vnd.ms-excel",action:"/employee/basic/importEmp","on-success":e.fileUploadSuccess,"on-error":e.fileUploadError,disabled:"正在导入"==e.fileUploadBtnText,"before-upload":e.beforeFileUpload}},[n("el-button",{attrs:{size:"mini",type:"success",loading:"正在导入"==e.fileUploadBtnText}},[n("i",{staticClass:"fa fa-lg fa-level-up",staticStyle:{"margin-right":"5px"}}),e._v(e._s(e.fileUploadBtnText)+"\n          ")])],1),e._v(" "),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.exportEmps}},[n("i",{staticClass:"fa fa-lg fa-level-down",staticStyle:{"margin-right":"5px"}}),e._v("导出数据\n        ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.showAddEmpView}},[e._v("\n          添加员工\n        ")])],1)]),e._v(" "),n("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[n("div",[n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticStyle:{"margin-bottom":"10px",border:"1px","border-radius":"5px","border-style":"solid",padding:"5px 0px 5px 0px","box-sizing":"border-box","border-color":"#20a0ff"}},[n("el-row",[n("el-col",{attrs:{span:5}},[e._v("\n                政治面貌:\n                "),n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"政治面貌"},model:{value:e.emp.politicId,callback:function(t){e.$set(e.emp,"politicId",t)},expression:"emp.politicId"}},e._l(e.politics,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-col",{attrs:{span:4}},[e._v("\n                民族:\n                "),n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择民族"},model:{value:e.emp.nationId,callback:function(t){e.$set(e.emp,"nationId",t)},expression:"emp.nationId"}},e._l(e.nations,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-col",{attrs:{span:4}},[e._v("\n                职位:\n                "),n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择职位"},model:{value:e.emp.posId,callback:function(t){e.$set(e.emp,"posId",t)},expression:"emp.posId"}},e._l(e.positions,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-col",{attrs:{span:4}},[e._v("\n                职称:\n                "),n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择职称"},model:{value:e.emp.jobLevelId,callback:function(t){e.$set(e.emp,"jobLevelId",t)},expression:"emp.jobLevelId"}},e._l(e.joblevels,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-col",{attrs:{span:7}},[e._v("\n                聘用形式:\n                "),n("el-radio-group",{model:{value:e.emp.engageForm,callback:function(t){e.$set(e.emp,"engageForm",t)},expression:"emp.engageForm"}},[n("el-radio",{attrs:{label:"劳动合同"}},[e._v("劳动合同")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"劳务合同"}},[e._v("劳务合同")])],1)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:5}},[e._v("\n                所属部门:\n                "),n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop2,callback:function(t){e.showOrHidePop2=t},expression:"showOrHidePop2"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick2}}),e._v(" "),n("div",{staticStyle:{width:"130px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree2},slot:"reference"},[e._v(e._s(e.emp.departmentName)+"\n                  ")])],1)],1),e._v(" "),n("el-col",{attrs:{span:10}},[e._v("\n                入职日期:\n                "),n("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.beginDateScope,callback:function(t){e.beginDateScope=t},expression:"beginDateScope"}})],1),e._v(" "),n("el-col",{attrs:{span:5,offset:4}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchEmp}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.emps,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"姓名",width:"90"}}),e._v(" "),n("el-table-column",{attrs:{prop:"workID",width:"85",align:"left",label:"工号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"gender",label:"性别",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"出生日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"idCard",width:"150",align:"left",label:"身份证号码"}}),e._v(" "),n("el-table-column",{attrs:{prop:"wedlock",width:"70",label:"婚姻状况"}}),e._v(" "),n("el-table-column",{attrs:{width:"50",prop:"nation.name",label:"民族"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nativePlace",width:"80",label:"籍贯"}}),e._v(" "),n("el-table-column",{attrs:{prop:"politicsStatus.name",label:"政治面貌"}}),e._v(" "),n("el-table-column",{attrs:{prop:"email",width:"180",align:"left",label:"电子邮件"}}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",width:"100",label:"电话号码"}}),e._v(" "),n("el-table-column",{attrs:{prop:"address",width:"220",align:"left",label:"联系地址"}}),e._v(" "),n("el-table-column",{attrs:{prop:"department.name",align:"left",width:"100",label:"所属部门"}}),e._v(" "),n("el-table-column",{attrs:{width:"100",align:"left",prop:"position.name",label:"职位"}}),e._v(" "),n("el-table-column",{attrs:{prop:"jobLevel.name",width:"100",align:"left",label:"职称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"engageForm",label:"聘用形式"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"入职日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.beginDate)))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"转正日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.conversionTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"95",align:"left",label:"合同起始日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.beginContract)))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"95",align:"left",label:"合同截至日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.endContract)))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"left",width:"70",label:"合同期限"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.contractTerm)+"年")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"left",prop:"tiptopDegree",label:"最高学历"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(n){e.showEditEmpView(t.row)}}},[e._v("编辑\n              ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"}},[e._v("查看高级资料\n              ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(n){e.deleteEmp(t.row)}}},[e._v("删除\n              ")])]}}])})],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.emps.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyEmps}},[e._v("批量删除\n          ")]):e._e(),e._v(" "),n("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),n("el-form",{ref:"addEmpForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.emp,rules:e.rules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"77%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入员工姓名"},model:{value:e.emp.name,callback:function(t){e.$set(e.emp,"name",t)},expression:"emp.name"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:5}},[n("div",[n("el-form-item",{attrs:{label:"性别:",prop:"gender"}},[n("el-radio-group",{model:{value:e.emp.gender,callback:function(t){e.$set(e.emp,"gender",t)},expression:"emp.gender"}},[n("el-radio",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"女"}},[e._v("女")])],1)],1)],1)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"出生日期"},model:{value:e.emp.birthday,callback:function(t){e.$set(e.emp,"birthday",t)},expression:"emp.birthday"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:7}},[n("div",[n("el-form-item",{attrs:{label:"政治面貌:",prop:"politicId"}},[n("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"政治面貌"},model:{value:e.emp.politicId,callback:function(t){e.$set(e.emp,"politicId",t)},expression:"emp.politicId"}},e._l(e.politics,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"民族:",prop:"nationId"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择民族"},model:{value:e.emp.nationId,callback:function(t){e.$set(e.emp,"nationId",t)},expression:"emp.nationId"}},e._l(e.nations,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)]),e._v(" "),n("el-col",{attrs:{span:5}},[n("div",[n("el-form-item",{attrs:{label:"籍贯:",prop:"nativePlace"}},[n("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"员工籍贯"},model:{value:e.emp.nativePlace,callback:function(t){e.$set(e.emp,"nativePlace",t)},expression:"emp.nativePlace"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"电子邮箱:",prop:"email"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"电子邮箱地址..."},model:{value:e.emp.email,callback:function(t){e.$set(e.emp,"email",t)},expression:"emp.email"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:7}},[n("div",[n("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"联系地址..."},model:{value:e.emp.address,callback:function(t){e.$set(e.emp,"address",t)},expression:"emp.address"}})],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"职位:",prop:"posId"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择职位"},model:{value:e.emp.posId,callback:function(t){e.$set(e.emp,"posId",t)},expression:"emp.posId"}},e._l(e.positions,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)]),e._v(" "),n("el-col",{attrs:{span:5}},[n("div",[n("el-form-item",{attrs:{label:"职称:",prop:"jobLevelId"}},[n("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择职称"},model:{value:e.emp.jobLevelId,callback:function(t){e.$set(e.emp,"jobLevelId",t)},expression:"emp.jobLevelId"}},e._l(e.joblevels,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"所属部门:",prop:"departmentId"}},[n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),n("div",{staticStyle:{width:"150px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:e.showDepTree(t):null}},slot:"reference"},[e._v(e._s(e.emp.departmentName)+"\n                  ")])],1)],1)],1)]),e._v(" "),n("el-col",{attrs:{span:7}},[n("div",[n("el-form-item",{attrs:{label:"电话号码:",prop:"phone"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.emp.phone,callback:function(t){e.$set(e.emp,"phone",t)},expression:"emp.phone"}})],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"工号:",prop:"workID"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"",size:"mini",placeholder:"员工工号..."},model:{value:e.emp.workID,callback:function(t){e.$set(e.emp,"workID",t)},expression:"emp.workID"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:5}},[n("div",[n("el-form-item",{attrs:{label:"学历:",prop:"tiptopDegree"}},[n("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"最高学历"},model:{value:e.emp.tiptopDegree,callback:function(t){e.$set(e.emp,"tiptopDegree",t)},expression:"emp.tiptopDegree"}},e._l(e.degrees,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"毕业院校:",prop:"school"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"毕业院校名称"},model:{value:e.emp.school,callback:function(t){e.$set(e.emp,"school",t)},expression:"emp.school"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:7}},[n("div",[n("el-form-item",{attrs:{label:"专业名称:",prop:"specialty"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"专业名称"},model:{value:e.emp.specialty,callback:function(t){e.$set(e.emp,"specialty",t)},expression:"emp.specialty"}})],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"入职日期:",prop:"beginDate"}},[n("el-date-picker",{staticStyle:{width:"130px"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"入职日期"},model:{value:e.emp.beginDate,callback:function(t){e.$set(e.emp,"beginDate",t)},expression:"emp.beginDate"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"转正日期:",prop:"conversionTime"}},[n("el-date-picker",{staticStyle:{width:"130px"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"转正日期"},model:{value:e.emp.conversionTime,callback:function(t){e.$set(e.emp,"conversionTime",t)},expression:"emp.conversionTime"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"合同起始日期:",prop:"beginContract"}},[n("el-date-picker",{staticStyle:{width:"135px"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"合同起始日期"},model:{value:e.emp.beginContract,callback:function(t){e.$set(e.emp,"beginContract",t)},expression:"emp.beginContract"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:6}},[n("div",[n("el-form-item",{attrs:{label:"合同终止日期:",prop:"endContract"}},[n("el-date-picker",{staticStyle:{width:"135px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"mini",type:"date",placeholder:"合同终止日期"},model:{value:e.emp.endContract,callback:function(t){e.$set(e.emp,"endContract",t)},expression:"emp.endContract"}})],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("div",[n("el-form-item",{attrs:{label:"身份证号码:",prop:"idCard"}},[n("el-input",{staticStyle:{width:"180px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入员工身份证号码..."},model:{value:e.emp.idCard,callback:function(t){e.$set(e.emp,"idCard",t)},expression:"emp.idCard"}})],1)],1)]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",[n("el-form-item",{attrs:{label:"聘用形式:",prop:"engageForm"}},[n("el-radio-group",{model:{value:e.emp.engageForm,callback:function(t){e.$set(e.emp,"engageForm",t)},expression:"emp.engageForm"}},[n("el-radio",{attrs:{label:"劳动合同"}},[e._v("劳动合同")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"劳务合同"}},[e._v("劳务合同")])],1)],1)],1)]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",[n("el-form-item",{attrs:{label:"婚姻状况:",prop:"wedlock"}},[n("el-radio-group",{model:{value:e.emp.wedlock,callback:function(t){e.$set(e.emp,"wedlock",t)},expression:"emp.wedlock"}},[n("el-radio",{attrs:{label:"已婚"}},[e._v("已婚")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"未婚"}},[e._v("未婚")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"离异"}},[e._v("离异")])],1)],1)],1)])],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("LTO/")},null,null);t.default=o.exports},"/LNZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"text-align":"left"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"position"==e.state?"添加职位...":"添加职称...",size:"mini","prefix-icon":"el-icon-plus"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addPosition(t):null}},model:{value:e.positionName,callback:function(t){e.positionName=t},expression:"positionName"}}),e._v(" "),"jobtitle"==e.state?n("el-select",{attrs:{size:"mini",placeholder:"职称等级"},model:{value:e.titleLevel,callback:function(t){e.titleLevel=t},expression:"titleLevel"}},e._l(e.titleLevels,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addPosition}},[e._v("添加")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{data:e.posData,size:"mini",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"80",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"position"==e.state?"职位名称":"职称名称",width:"180",align:"left"}}),e._v(" "),"jobtitle"==e.state?n("el-table-column",{attrs:{prop:"titleLevel",label:"职称级别",width:"180",align:"left"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"创建时间",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createDate)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[e.posData.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n    ")]):e._e()],1),e._v(" "),n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{attrs:{title:"position"==e.state?"编辑职位名称":"编辑职称",visible:e.dialogVisible,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{attrs:{size:"mini",placeholder:"请输入新的职位名称..."},model:{value:e.updatePosName,callback:function(t){e.updatePosName=t},expression:"updatePosName"}}),e._v(" "),"jobtitle"==e.state?n("el-select",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini",placeholder:"职称等级"},model:{value:e.updateTitleLevel,callback:function(t){e.updateTitleLevel=t},expression:"updateTitleLevel"}},e._l(e.titleLevels,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})):e._e(),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.updatePosNameExec}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]},a=n("VU/8")({mounted:function(){this.loadTableData()},methods:{updatePosNameExec:function(){var e=this;if(this.isNotNullORBlank(this.updatePosName)){this.loading=!0;var t=this;this.putRequest("position"==this.state?"/system/basic/position":"/system/basic/joblevel",{name:this.updatePosName,id:this.updatePosId,titleLevel:this.updateTitleLevel}).then(function(n){if(t.loading=!1,n&&200==n.status){e.dialogVisible=!1;var i=n.data;t.$message({type:i.status,message:i.msg}),t.loadTableData()}})}else this.$message.warning("position"==this.state?"职位名称不能为空!":"职称名称不能为空!")},deleteMany:function(){var e=this,t=this;this.$confirm("删除"+this.multipleSelection.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t){e=e+t.id+","}),t.doDelete(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addPosition:function(){if(this.isNotNullORBlank(this.positionName))if("jobtitle"!=this.state||this.isNotNullORBlank(this.titleLevel)){var e=this;this.loading=!0,this.postRequest("position"==this.state?"/system/basic/position":"/system/basic/joblevel",{name:this.positionName,titleLevel:this.titleLevel}).then(function(t){if(e.loading=!1,t&&200==t.status){var n=t.data;e.$message({type:n.status,message:n.msg}),e.loadTableData(),e.positionName="",e.titleLevel=""}})}else this.$message.warning("请选择职称级别!");else this.$message.warning("position"==this.state?"职位名称不能为空!":"职称名称不能为空!")},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){this.updatePosName=t.name,this.updatePosId=t.id,this.updateTitleLevel=t.titleLevel,this.dialogVisible=!0},handleDelete:function(e,t){var n=this,i=this;this.$confirm("删除["+t.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(t.id)}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},doDelete:function(e){var t=this;t.loading=!0;var n="position"==this.state?"/system/basic/position/":"/system/basic/joblevel/";this.deleteRequest(n+e).then(function(e){t.loading=!1,e&&200==e.status&&t.loadTableData()})},loadTableData:function(){var e=this;this.loading=!0,this.getRequest("position"==this.state?"/system/basic/positions":"/system/basic/joblevels").then(function(t){e.loading=!1,t&&200==t.status&&(e.posData=t.data)})}},data:function(){return{positionName:"",updatePosName:"",updateTitleLevel:"",titleLevel:"",updatePosId:-1,loading:!1,dialogVisible:!1,multipleSelection:[],type:[],titleLevels:["正高级","副高级","中级","初级","员级"],nameLabelName:"position"==this.state?"职位名称":"职称名称",posData:[]}},props:["state"]},i,!1,null,null,null);t.default=a.exports},"3GGU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={mounted:function(){this.loadTableData()},methods:{addCostItemDef:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.costItemDef.id?(t.tableLoading=!0,t.putRequest("/system/budget/costItem",t.costItemDef).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyCostDefItemData(),n.loadTableData()}})):(t.tableLoading=!0,t.postRequest("/system/budget/costItem",t.costItemDef).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyCostDefItemData(),n.loadTableData()}}))})},deleteMany:function(){var e=this,t=this;this.$confirm("删除"+this.multipleSelection.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t){e=e+t.id+","}),t.doDelete(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},formatCostGroup:function(e,t){for(var n=0;n<this.costGroups.length;n++)if(this.costGroups[n].id==e.groupId)return this.costGroups[n].name;return"unknow"},formatBeAmount:function(e,t){return 1==e.beAmount?"参与合计":"不参与合计"},handleSelectionChange:function(e){this.multipleSelection=e},showAddCostItemDefView:function(){this.dialogTitle="添加费用定义信息",this.emptyCostDefItemData(),this.dialogVisible=!0},handleEdit:function(e,t){console.log(t),this.dialogTitle="编辑费用定义信息",this.costItemDef=t,this.dialogVisible=!0},handleDelete:function(e,t){var n=this,i=this;this.$confirm("删除["+t.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(t.id)}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},doDelete:function(e){var t=this;t.loading=!0;var n="position"==this.state?"/system/basic/position/":"/system/basic/joblevel/";this.deleteRequest(n+e).then(function(e){t.loading=!1,e&&200==e.status&&t.loadTableData()})},loadTableData:function(){var e=this;this.loading=!0,this.getRequest("/system/budget/settings").then(function(t){e.loading=!1,t&&200==t.status&&(e.bgDefData=t.data.costItems,e.costGroups=t.data.costGroups)})},emptyCostDefItemData:function(){this.costItemDef={id:"",name:"",groupId:"",beAmount:!0,amountFomula:"",desc:""}}},data:function(){return{itemName:"",updateItemName:"",groupId:-1,updateGroupId:-1,beAmount:!0,updateBeAmount:!1,desc:"",updateDesc:"",amountFomula:"",updateAmountFomula:"",loading:!1,dialogVisible:!1,dialogTitle:"编辑费用定义",multipleSelection:[],costItemDef:{id:"",name:"",groupId:"",beAmount:!0,amountFomula:"",desc:""},bgDefData:[],costGroups:[],rules:{name:[{required:!0,message:"必填:费用定义名称",trigger:"blur"}],groupId:[{required:!0,message:"必填:请选择",trigger:"blur"}]}}},props:["state"]},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.showAddCostItemDefView}},[e._v("添加")]),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.bgDefData,size:"mini",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"80",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"groupId",label:"费用类别",formatter:e.formatCostGroup,width:"180",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{width:"120",label:"是否参与统计",prop:"beAmount",formatter:e.formatBeAmount,align:"left"}}),e._v(" "),n("el-table-column",{attrs:{width:"80",label:"计算公式",prop:"amountFomula",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"备注",prop:"desc",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[e.bgDefData.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n    ")]):e._e()],1),e._v(" "),n("el-form",{ref:"addItemForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.costItemDef,rules:e.rules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"55%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"费用项名称:",prop:"name"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入新的费用项名称"},model:{value:e.costItemDef.name,callback:function(t){e.$set(e.costItemDef,"name",t)},expression:"costItemDef.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"费用分类:",prop:"group"}},[n("el-select",{attrs:{size:"mini",placeholder:"费用分类"},model:{value:e.costItemDef.groupId,callback:function(t){e.$set(e.costItemDef,"groupId",t)},expression:"costItemDef.groupId"}},e._l(e.costGroups,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"beAmount"}},[n("el-checkbox",{model:{value:e.costItemDef.beAmount,callback:function(t){e.$set(e.costItemDef,"beAmount",t)},expression:"costItemDef.beAmount"}},[e._v("参与总数统计")])],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"总数计算公式:",prop:"amountFomula"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"总数计算公式..."},model:{value:e.costItemDef.amountFomula,callback:function(t){e.$set(e.costItemDef,"amountFomula",t)},expression:"costItemDef.amountFomula"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注:",prop:"desc"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"备注..."},model:{value:e.costItemDef.desc,callback:function(t){e.$set(e.costItemDef,"desc",t)},expression:"costItemDef.desc"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addCostItemDef("addItemForm")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]},o=n("VU/8")(i,a,!1,null,null,null);t.default=o.exports},"4B6g":function(e,t){},"4ft9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("HxTD"),a=n("sbZ9"),o={beforeMount:function(){this.curPrjId=this.$route.params.id,console.log("prjId:"+this.curPrjId)},mounted:function(){this.curPrjId=this.$route.params.id,this.prjBudget.prjNo=this.$route.params.prjNo,this.prjBudget.prjName=this.$route.params.prjName,console.log("prjId:"+this.curPrjId+" prjName:"+this.$route.params.prjName)},methods:{initData:function(){var e=this;this.loading=!0,this.getRequest("/system/budget/settings").then(function(t){e.loading=!1,t&&200==t.status&&(e.budgetTypes=t.data.budgetTypes)})}},components:{"common-item":i.default,"man-month":a.default},data:function(){return{loading:!1,activeTab:"manmonth",curPrjId:-1,prjBudget:{prjId:-1,prjNo:"",prjName:"",prjManCostAvg:0,contractAmount:0,curYearAmount:0,budgets:[{year:2017,budgets:[{month:8,amount:0,manMonth:2,costAmount:0,realManMonth:0},{month:9,amount:0,manMonth:3,costAmount:0,realManMonth:0},{month:10,amount:0,manMonth:1,costAmount:0,realManMonth:0},{month:11,amount:0,manMonth:4,costAmount:0,realManMonth:0},{month:12,amount:0,manMonth:5,costAmount:0,realManMonth:0}]},{year:2018,budgets:[{month:1,amount:0,manMonth:3,costAmount:0,realManMonth:0},{month:2,amount:0,manMonth:4,costAmount:0,realManMonth:0},{month:3,amount:0,manMonth:1,costAmount:0,realManMonth:0},{month:4,amount:0,manMonth:2,costAmount:0,realManMonth:0},{month:5,amount:0,manMonth:6,costAmount:0,realManMonth:0}]}]}}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("div",{staticStyle:{width:"100%"}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("label",{staticClass:"el-form-item__label"},[e._v("项目名称:")]),e._v(" "),n("div",{staticClass:"el-form-item__content"},[e._v(e._s(e.prjBudget.prjName))])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("label",{staticClass:"el-form-item__label"},[e._v("项目编号:")]),e._v(" "),n("div",{staticClass:"el-form-item__content"},[e._v(e._s(e.prjBudget.prjNo))])])],1),e._v(" "),n("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"人月",name:"manmonth"}},[n("man-month",{attrs:{prjid:this.curPrjId}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"费用",name:"cost"}},[n("common-item",{attrs:{type:"cost",name:"费用",prjid:this.curPrjId}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"收款",name:"income"}},[n("common-item",{attrs:{type:"income",name:"收款",prjid:this.curPrjId}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"确权",name:"rights"}},[n("common-item",{attrs:{type:"confirm",name:"确权",prjid:this.curPrjId}})],1)],1)],1)])},staticRenderFns:[]},l=n("VU/8")(o,s,!1,null,null,null);t.default=l.exports},"5xQo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("奖惩规则")])])}]},a=n("VU/8")(null,i,!1,null,null,null);t.default=a.exports},"7Otq":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTk2QkI4RkE3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTk2QkI4Rjk3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzk3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyN0E3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WHowqAAAXNElEQVR42uxda4xd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"},ABUp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("高级资料")])])}]},a=n("VU/8")(null,i,!1,null,null,null);t.default=a.exports},FvOz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("bOdI"),a=n.n(i),o={data:function(){return{keywords:"",depName:"",treeLoading:!1,dialogVisible:!1,allDeps:[],pDep:"",treeData:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"}}},mounted:function(){this.treeLoading=!0,this.loadTreeData()},watch:{keywords:function(e){this.$refs.tree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},loadTreeData:function(){var e=this;this.getRequest("/system/basic/dep/-1").then(function(t){e.treeLoading=!1,t&&200==t.status&&(e.treeData=t.data)})},setDataToTree:function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(a.id==t)return void(e[i].children=e[i].children.concat(n));this.setDataToTree(a.children,t,n)}},addDep:function(){var e=this;this.dialogVisible=!1,this.treeLoading=!0,this.postRequest("/system/basic/dep",{name:this.depName,parentId:this.pDep}).then(function(t){if(e.treeLoading=!1,t&&200==t.status){var n=t.data;e.depName="",e.$message({type:n.status,message:"添加成功!"}),e.setDataToTree(e.treeData,e.pDep,n.msg)}})},loadAllDeps:function(){var e=this;this.getRequest("/system/basic/deps").then(function(t){t&&200==t.status&&(e.allDeps=t.data)})},showAddDepView:function(e,t){this.loadAllDeps(),this.dialogVisible=!0,this.pDep=e.id,t.stopPropagation()},deleteDep:function(e,t){var n=this;e.children.length>0?this.$message({message:"该部门下尚有其他部门，不能被删除!",type:"warning"}):this.$confirm("删除["+e.name+"]部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.treeLoading=!0,n.deleteRequest("/system/basic/dep/"+e.id).then(function(t){if(n.treeLoading=!1,t&&200==t.status){var i=t.data;n.$message({message:i.msg,type:i.status}),n.deleteLocalDep(n.treeData,e)}})}).catch(function(){n.$message({type:"info",message:"已取消删除"})}),t.stopPropagation()},deleteLocalDep:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id==t.id)return void e.splice(n,1);this.deleteLocalDep(i.children,t)}},renderContent:function(e,t){var n,i,o=this,s=t.node,l=t.data;t.store;return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",[e("span",[s.label])]),e("span",[e("el-button",(n={style:"font-size: 12px;",attrs:{type:"primary",size:"mini"}},a()(n,"style","padding:3px"),a()(n,"on",{click:function(){return o.showAddDepView(l,event)}}),n),["添加部门"]),e("el-button",(i={style:"font-size: 12px;",attrs:{type:"danger",size:"mini"}},a()(i,"style","padding:3px"),a()(i,"on",{click:function(){return o.deleteDep(l,event)}}),i),["删除部门"])])])}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"text-align":"left"}},[n("el-input",{staticStyle:{width:"500px",margin:"0px",padding:"0px"},attrs:{placeholder:"输入部门名称搜索部门...",size:"mini","prefix-icon":"el-icon-search"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),n("div",[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",staticStyle:{width:"500px","margin-top":"10px"},attrs:{props:e.defaultProps,data:e.treeData,"filter-node-method":e.filterNode,"render-content":e.renderContent}}),e._v(" "),n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{attrs:{title:"添加部门",visible:e.dialogVisible,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("span",[e._v("上级部门")]),e._v(" "),n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.pDep,callback:function(t){e.pDep=t},expression:"pDep"}},e._l(e.allDeps,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("span",[e._v("部门名称")]),e._v(" "),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入部门名称..."},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addDep(t):null}},model:{value:e.depName,callback:function(t){e.depName=t},expression:"depName"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addDep}},[e._v("添加")])],1)])],1)],1)])},staticRenderFns:[]},l=n("VU/8")(o,s,!1,null,null,null);t.default=l.exports},GrqC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"text-align":"left"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.showAddCostGroupDialog}},[e._v("添加")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.costGroups,size:"mini",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"80",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"备注",width:"250",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n            ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n            ")])]}}])})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[e.costGroups.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n      ")]):e._e()],1),e._v(" "),n("el-form",{ref:"addCostGroupForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.costGroup,rules:e.rules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form-item",{attrs:{label:"费用分组名称:",prop:"name"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入新的费用分组名称..."},model:{value:e.costGroup.name,callback:function(t){e.$set(e.costGroup,"name",t)},expression:"costGroup.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注:",prop:"desc"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"请输入新的备注..."},model:{value:e.costGroup.desc,callback:function(t){e.$set(e.costGroup,"desc",t)},expression:"costGroup.desc"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addCostGroup("addCostGroupForm")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]},a=n("VU/8")({mounted:function(){this.loadTableData()},methods:{addCostGroup:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.costGroup.id&&-1!=t.costGroup.id?(t.tableLoading=!0,t.putRequest("/system/budget/costGroup",t.costGroup).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyCostGroupData(),n.loadTableData()}})):(t.tableLoading=!0,t.postRequest("/system/budget/costGroup",t.costGroup).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyCostGroupData(),n.loadTableData()}}))})},deleteMany:function(){var e=this,t=this;this.$confirm("删除"+this.multipleSelection.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t){e=e+t.id+","}),t.doDelete(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},emptyCostGroupData:function(){this.costGroup={id:-1,name:"",desc:""}},handleSelectionChange:function(e){this.multipleSelection=e},showAddCostGroupDialog:function(){this.dialogTitle="新加费用分组",this.emptyCostGroupData(),this.dialogVisible=!0},handleEdit:function(e,t){this.dialogTitle="编辑费用分组",this.costGroup=t,this.dialogVisible=!0},handleDelete:function(e,t){var n=this,i=this;this.$confirm("删除["+t.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(t.id)}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},doDelete:function(e){var t=this;t.loading=!0,this.deleteRequest("/system/budget/costGroup/"+e).then(function(e){t.loading=!1,e&&200==e.status&&t.loadTableData()})},loadTableData:function(){var e=this;this.loading=!0,this.getRequest("/system/budget/settings").then(function(t){e.loading=!1,t&&200==t.status&&(e.costGroups=t.data.costGroups)})}},data:function(){return{loading:!1,dialogVisible:!1,multipleSelection:[],costGroups:[],dialogTitle:"",costGroup:{id:-1,name:"",desc:""},rules:{name:[{required:!0,message:"必填:费用分组名称！",trigger:"blur"}]}}}},i,!1,null,null,null);t.default=a.exports},HYVu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("cPUQ"),a=n("KBu4"),o={mounted:function(){},methods:{initData:function(){var e=this;this.loading=!0,this.getRequest("/system/budget/settings").then(function(t){e.loading=!1,t&&200==t.status&&(e.budgetTypes=t.data.budgetTypes)})}},components:{"custom-mana":i.default,"custom-contractor":a.default},data:function(){return{loading:!1,activeTab:"customMana"}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"客户维护",name:"customMana"}},[n("custom-mana")],1),e._v(" "),n("el-tab-pane",{attrs:{label:"客户联系人",name:"customContractor"}},[n("custom-contractor")],1)],1)],1)},staticRenderFns:[]},l=n("VU/8")(o,s,!1,null,null,null);t.default=l.exports},HxTD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={beforeMount:function(){},mounted:function(){console.log(this.name+" prjId:"+this.prjid),this.placeHolder="请输入新的"+this.name+"名称...",this.label=this.name+"项名称：",this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0;var t="/project/budget/"+this.type+"/"+this.prjid;console.log(t),this.getRequest(t).then(function(t){e.loading=!1,t&&200==t.status&&(e.commonItemes=t.data)})},emptyCommonItemData:function(){this.commonItem.id=-1,this.commonItem.name="",this.commonItem.bgDate="",this.commonItem.amount=0,this.commonItem.desc=""},addCommItem:function(e){var t=this,n=this;this.$refs[e].validate(function(e){e&&(t.tableLoading=!0,t.postRequest("/system/budget/commBudgetItem",t.commonItem).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.emptyCommonItemData(),n.loadData()}}))})},editCommonItem:function(e){this.editing=!0,this.commonItem.id=e.id,this.commonItem.name=e.name,this.commonItem.amount=e.amount,this.commonItem.desc=e.desc,this.commonItem.bgDate=e.bgDate,this.buttonLabel="提交修改"},cancelEditCommonItem:function(){this.editing=!1,this.buttonLabel="确定新增",this.emptyCommonItemData()},formatAmount:function(e,t,n){for(var i=t.property.split("."),a=e,o=0;o<i.length;o++)a=a[i[o]];return this.formatMoney(a,1)}},data:function(){return{loading:!1,commonItemes:[],tableLoading:!1,addViewVisible:!1,placeHolder:"",label:"",amountLabel:"",buttonLabel:"确定新增",editing:!1,faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",commonItem:{id:-1,curPrjId:-1,name:"",amount:0,bgDate:"",desc:""},rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],amount:[{required:!0,message:"必填:金额",trigger:"blur"}],bgDate:[{required:!0,message:"必填:发生日期",trigger:"blur"}]}}},props:["prjid","type","name"]},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"addCommItemForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.commonItem,rules:e.rules}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:e.label,prop:"name"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:e.placeHolder},model:{value:e.commonItem.name,callback:function(t){e.$set(e.commonItem,"name",t)},expression:"commonItem.name"}})],1)],1),e._v(" "),"cost"==e.type|"income"==e.type?n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"金额:",prop:"amount"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"金额"},model:{value:e.commonItem.amount,callback:function(t){e.$set(e.commonItem,"amount",t)},expression:"commonItem.amount"}})],1)],1):e._e(),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{prop:"bgDate",label:"预计发生时间:"}},[n("el-date-picker",{staticStyle:{width:"130px"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"预计发生日期"},model:{value:e.commonItem.bgDate,callback:function(t){e.$set(e.commonItem,"bgDate",t)},expression:"commonItem.bgDate"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"备注:",prop:"desc"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"备注..."},model:{value:e.commonItem.desc,callback:function(t){e.$set(e.commonItem,"desc",t)},expression:"commonItem.desc"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[e.editing?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.cancelEditCommonItem()}}},[e._v("取 消")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addCommItem("addCommItemForm")}}},[e._v(e._s(e.buttonLabel))])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.commonItemes,border:"",stripe:"",size:"mini"}},[n("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bgDate",width:"100",align:"left",label:"预计发生时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.bgDate)))]}}])}),e._v(" "),"cost"==e.type||"income"==e.type?n("el-table-column",{attrs:{prop:"amount",width:"100",align:"right",formatter:e.formatAmount,label:"金额"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{prop:"desc",width:"250",label:"备注"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(n){e.editCommonItem(t.row)}}},[e._v("编辑\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(n){e.deleteCommonItem(t.row)}}},[e._v("删除\n                ")])]}}])})],1)],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("Y9Jp")},null,null);t.default=o.exports},JjIn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){var i,a=n("OvRC"),o=n.n(a),s=n("C4MV"),l=n.n(s),r=n("pFYg"),c=n.n(r);!function(i){if("object"==("undefined"==typeof exports?"undefined":c()(exports))&&void 0!==t)t.exports=i();else if("function"==typeof define&&n("nErl"))define([],i);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).SockJS=i()}}(function(){return function e(t,n,a){function o(l,r){if(!n[l]){if(!t[l]){if(!r&&("function"==typeof i&&i))return i(l,!0);if(s)return s(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[l]={exports:{}};t[l][0].call(d.exports,function(e){var n=t[l][1][e];return o(n||e)},d,d.exports,e,t,n,a)}return n[l].exports}for(var s="function"==typeof i&&i,l=0;l<a.length;l++)o(a[l]);return o}({1:[function(t,n,i){(function(e){var i=t("./transport-list");n.exports=t("./main")(i),"_sockjs_onload"in e&&setTimeout(e._sockjs_onload,1)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,n){function i(){o.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var a=e("inherits"),o=e("./event");a(i,o),t.exports=i},{"./event":4,inherits:54}],3:[function(e,t,n){function i(){o.call(this)}var a=e("inherits"),o=e("./eventtarget");a(i,o),i.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},i.prototype.once=function(e,t){var n=this,i=!1;this.on(e,function a(){n.removeListener(e,a),i||(i=!0,t.apply(this,arguments))})},i.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];for(var o=0;o<t.length;o++)t[o].apply(this,i)}},i.prototype.on=i.prototype.addListener=o.prototype.addEventListener,i.prototype.removeListener=o.prototype.removeEventListener,t.exports.EventEmitter=i},{"./eventtarget":5,inherits:54}],4:[function(e,t,n){function i(e){this.type=e}i.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},i.prototype.stopPropagation=function(){},i.prototype.preventDefault=function(){},i.CAPTURING_PHASE=1,i.AT_TARGET=2,i.BUBBLING_PHASE=3,t.exports=i},{}],5:[function(e,t,n){function i(){this._listeners={}}i.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},i.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var i=n.indexOf(t);return-1!==i?void(n.length>1?this._listeners[e]=n.slice(0,i).concat(n.slice(i+1)):delete this._listeners[e]):void 0}},i.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var i=this._listeners[t],a=0;a<i.length;a++)i[a].apply(this,n)},t.exports=i},{}],6:[function(e,t,n){function i(e){o.call(this),this.initEvent("message",!1,!1),this.data=e}var a=e("inherits"),o=e("./event");a(i,o),t.exports=i},{"./event":4,inherits:54}],7:[function(e,t,n){function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}var a=e("json3"),o=e("./utils/iframe");i.prototype._transportClose=function(e,t){o.postMessage("c",a.stringify([e,t]))},i.prototype._transportMessage=function(e){o.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=i},{"./utils/iframe":47,json3:55}],8:[function(e,t,n){var i=e("./utils/url"),a=e("./utils/event"),o=e("json3"),s=e("./facade"),l=e("./info-iframe-receiver"),r=e("./utils/iframe"),c=e("./location");t.exports=function(e,t){var n,d={};t.forEach(function(e){e.facadeTransport&&(d[e.facadeTransport.transportName]=e.facadeTransport)}),d[l.transportName]=l,e.bootstrap_iframe=function(){var t;r.currentWindowId=c.hash.slice(1);a.attachEvent("message",function(a){if(a.source===parent&&(void 0===n&&(n=a.origin),a.origin===n)){var l;try{l=o.parse(a.data)}catch(e){return}if(l.windowId===r.currentWindowId)switch(l.type){case"s":var u;try{u=o.parse(l.data)}catch(e){break}var p=u[0],m=u[1],h=u[2],f=u[3];if(p!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+e.version+'".');if(!i.isOriginEqual(h,c.href)||!i.isOriginEqual(f,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+h+", "+f+")");t=new s(new d[m](h,f));break;case"m":t._send(l.data);break;case"c":t&&t._close(),t=null}}}),r.postMessage("s")}}},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:void 0,json3:55}],9:[function(e,t,n){function i(e,t){a.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var a,o;if(200===e){if(o=+new Date-i,t)try{a=s.parse(t)}catch(e){}l.isObject(a)||(a={})}n.emit("finish",a,o),n.removeAllListeners()})}var a=e("events").EventEmitter,o=e("inherits"),s=e("json3"),l=e("./utils/object");o(i,a),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=i},{"./utils/object":49,debug:void 0,events:3,inherits:54,json3:55}],10:[function(e,t,n){function i(e){var t=this;o.call(this),this.ir=new r(e,l),this.ir.once("finish",function(e,n){t.ir=null,t.emit("message",s.stringify([e,n]))})}var a=e("inherits"),o=e("events").EventEmitter,s=e("json3"),l=e("./transport/sender/xhr-local"),r=e("./info-ajax");a(i,o),i.transportName="iframe-info-receiver",i.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=i},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54,json3:55}],11:[function(t,n,i){(function(e){function i(t,n){var i=this;a.call(this);var o=function(){var e=i.ifr=new r(c.transportName,n,t);e.once("message",function(e){if(e){var t;try{t=s.parse(e)}catch(e){return i.emit("finish"),void i.close()}var n=t[0],a=t[1];i.emit("finish",n,a)}i.close()}),e.once("close",function(){i.emit("finish"),i.close()})};e.document.body?o():l.attachEvent("load",o)}var a=t("events").EventEmitter,o=t("inherits"),s=t("json3"),l=t("./utils/event"),r=t("./transport/iframe"),c=t("./info-iframe-receiver");o(i,a),i.enabled=function(){return r.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:void 0,events:3,inherits:54,json3:55}],12:[function(e,t,n){function i(e,t){var n=this;a.call(this),setTimeout(function(){n.doXhr(e,t)},0)}var a=e("events").EventEmitter,o=e("inherits"),s=e("./utils/url"),l=e("./transport/sender/xdr"),r=e("./transport/sender/xhr-cors"),c=e("./transport/sender/xhr-local"),d=e("./transport/sender/xhr-fake"),u=e("./info-iframe"),p=e("./info-ajax");o(i,a),i._getReceiver=function(e,t,n){return n.sameOrigin?new p(t,c):r.enabled?new p(t,r):l.enabled&&n.sameScheme?new p(t,l):u.enabled()?new u(e,t):new p(t,d)},i.prototype.doXhr=function(e,t){var n=this,a=s.addPath(e,"/info");this.xo=i._getReceiver(e,a,t),this.timeoutRef=setTimeout(function(){n._cleanup(!1),n.emit("finish")},i.timeout),this.xo.once("finish",function(e,t){n._cleanup(!0),n.emit("finish",e,t)})},i.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},i.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},i.timeout=8e3,t.exports=i},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:void 0,events:3,inherits:54}],13:[function(t,n,i){(function(e){n.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,n,i){(function(e){function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");b.call(this),this.readyState=i.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&g.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{};var a=n.sessionId||8;if("function"==typeof a)this._generateSessionId=a;else{if("number"!=typeof a)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return c.string(a)}}this._server=n.server||c.numberString(1e3);var o=new s(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var l="https:"===o.protocol;if("https"===y.protocol&&!l)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var r=t.sort();r.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<r.length-1&&e===r[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var d=u.getOrigin(y.href);this._origin=d?d.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:u.isOriginEqual(this.url,y.href),sameScheme:u.isSchemeEqual(this.url,y.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function a(e){return 1e3===e||e>=3e3&&e<=4999}t("./shims");var o,s=t("url-parse"),l=t("inherits"),r=t("json3"),c=t("./utils/random"),d=t("./utils/escape"),u=t("./utils/url"),p=t("./utils/event"),m=t("./utils/transport"),h=t("./utils/object"),f=t("./utils/browser"),g=t("./utils/log"),v=t("./event/event"),b=t("./event/eventtarget"),y=t("./location"),x=t("./event/close"),w=t("./event/trans-message"),_=t("./info-receiver");l(i,b),i.prototype.close=function(e,t){if(e&&!a(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==i.CLOSING&&this.readyState!==i.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},i.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===i.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===i.OPEN&&this._transport.send(d.quote(e))},i.version=t("./version"),i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,i.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo);var n=o.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._connect()}else this._close(1002,"Cannot connect to server")},i.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(t.needBody&&(!e.document.body||void 0!==e.document.readyState&&"complete"!==e.document.readyState&&"interactive"!==e.document.readyState))return this._transports.unshift(t),void p.attachEvent("load",this._connect.bind(this));var n=this._rto*t.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n);var i=u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),a=this._transportOptions[t.transportName],o=new t(i,this._transUrl,a);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=t.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},i.prototype._transportTimeout=function(){this.readyState===i.CONNECTING&&this._transportClose(2007,"Transport timed out")},i.prototype._transportMessage=function(e){var t,n=this,i=e.slice(0,1),a=e.slice(1);switch(i){case"o":return void this._open();case"h":return void this.dispatchEvent(new v("heartbeat"))}if(a)try{t=r.parse(a)}catch(e){}if(void 0!==t)switch(i){case"a":Array.isArray(t)&&t.forEach(function(e){n.dispatchEvent(new w(e))});break;case"m":this.dispatchEvent(new w(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},i.prototype._transportClose=function(e,t){return this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),a(e)||2e3===e||this.readyState!==i.CONNECTING?void this._close(e,t):void this._connect()},i.prototype._open=function(){this.readyState===i.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=i.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open"))):this._close(1006,"Server lost session")},i.prototype._close=function(e,t,n){var a=!1;if(this._ir&&(a=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===i.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=i.CLOSING,setTimeout(function(){this.readyState=i.CLOSED,a&&this.dispatchEvent(new v("error"));var o=new x("close");o.wasClean=n||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},i.prototype.countRTO=function(e){return e>100?4*e:300+e},n.exports=function(e){return o=m(e),t("./iframe-bootstrap")(i,e),i}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:void 0,inherits:54,json3:55,"url-parse":58}],15:[function(e,t,n){function i(){}var a,o=Array.prototype,s=Object.prototype,r=Function.prototype,d=String.prototype,u=o.slice,p=s.toString,m=function(e){return"[object Function]"===s.toString.call(e)},h=function(e){return"[object String]"===p.call(e)},f=l.a&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();a=f?function(e,t,n,i){!i&&t in e||l()(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,i){!i&&t in e||(e[t]=n)};var g=function(e,t,n){for(var i in t)s.hasOwnProperty.call(t,i)&&a(e,i,t[i],n)},v=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};g(r,{bind:function(e){var t=this;if(!m(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=u.call(arguments,1),a=Math.max(0,t.length-n.length),o=[],s=0;s<a;s++)o.push("$"+s);var l=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof l){var i=t.apply(this,n.concat(u.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(u.call(arguments)))});return t.prototype&&(i.prototype=t.prototype,l.prototype=new i,i.prototype=null),l}}),g(Array,{isArray:function(e){return"[object Array]"===p.call(e)}});var b=Object("a"),y="a"!==b[0]||!(0 in b);g(o,{forEach:function(e){var t=v(this),n=y&&h(this)?this.split(""):t,i=arguments[1],a=-1,o=n.length>>>0;if(!m(e))throw new TypeError;for(;++a<o;)a in n&&e.call(i,n[a],a,t)}},!function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,i){"object"!=(void 0===i?"undefined":c()(i))&&(t=!1)}),e.call([1],function(){n="string"==typeof this},"x")),!!e&&t&&n}(o.forEach));var x=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);g(o,{indexOf:function(e){var t=y&&h(this)?this.split(""):v(this),n=t.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=function(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},x);var w=d.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1];d.split=function(t,n){var i=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==p.call(t))return w.call(this,t,n);var a,s,l,r,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),u=0;for(t=new RegExp(t.source,d+"g"),i+="",e||(a=new RegExp("^"+t.source+"$(?!\\s)",d)),n=void 0===n?-1>>>0:function(e){return e>>>0}(n);(s=t.exec(i))&&!((l=s.index+s[0].length)>u&&(c.push(i.slice(u,s.index)),!e&&s.length>1&&s[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<i.length&&o.push.apply(c,s.slice(1)),r=s[0].length,u=l,c.length>=n));)t.lastIndex===s.index&&t.lastIndex++;return u===i.length?!r&&t.test("")||c.push(""):c.push(i.slice(u)),c.length>n?c.slice(0,n):c}}():"0".split(void 0,0).length&&(d.split=function(e,t){return void 0===e&&0===t?[]:w.call(this,e,t)});var _=d.substr,j="".substr&&"b"!=="0b".substr(-1);g(d,{substr:function(e,t){return _.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},j)},{}],16:[function(e,t,n){t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(t,n,i){(function(e){function i(e,t,n,i){var o=this;a.call(this),setTimeout(function(){o._start(e,t,n,i)},0)}var a=t("events").EventEmitter,o=t("inherits"),s=t("../../utils/event"),l=t("../../utils/url"),r=e.XMLHttpRequest;o(i,a),i.prototype._start=function(e,t,n,a){var o=this;try{this.xhr=new r}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=l.addQuery(t,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){o._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o.emit("finish",0,""),o._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(a&&a.noCredentials||!i.supportsCORS||(this.xhr.withCredentials="true"),a&&a.headers)for(var c in a.headers)this.xhr.setRequestHeader(c,a.headers[c]);this.xhr.onreadystatechange=function(){if(o.xhr){var e,t,n=o.xhr;switch(n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&o.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),o.emit("finish",t,n.responseText),o._cleanup(!1)}}};try{o.xhr.send(n)}catch(e){o.emit("finish",0,""),o._cleanup(!1)}},i.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},i.prototype.close=function(){this._cleanup(!0)},i.enabled=!!r;var c=["Active"].concat("Object").join("X");!i.enabled&&c in e&&(r=function(){try{return new e[c]("Microsoft.XMLHTTP")}catch(e){return null}},i.enabled=!!new r);var d=!1;try{d="withCredentials"in new r}catch(e){}i.supportsCORS=d,n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],18:[function(t,n,i){(function(e){n.exports=e.EventSource}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,n,i){(function(e){var t=e.WebSocket||e.MozWebSocket;n.exports=t?function(e){return new t(e)}:void 0}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){function i(e){if(!i.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/eventsource",s,l)}var a=e("inherits"),o=e("./lib/ajax-based"),s=e("./receiver/eventsource"),l=e("./sender/xhr-cors"),r=e("eventsource");a(i,o),i.enabled=function(){return!!r},i.transportName="eventsource",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(e,t,n){function i(e){if(!o.enabled)throw new Error("Transport created when disabled");l.call(this,e,"/htmlfile",o,s)}var a=e("inherits"),o=e("./receiver/htmlfile"),s=e("./sender/xhr-local"),l=e("./lib/ajax-based");a(i,l),i.enabled=function(e){return o.enabled&&e.sameOrigin},i.transportName="htmlfile",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:54}],22:[function(e,t,n){function i(e,t,n){if(!i.enabled())throw new Error("Transport created when disabled");s.call(this);var a=this;this.origin=r.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=u.string(8);var o=r.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=c.createIframe(o,function(e){a.emit("close",1006,"Unable to load an iframe ("+e+")"),a.close()}),this.onmessageCallback=this._message.bind(this),d.attachEvent("message",this.onmessageCallback)}var a=e("inherits"),o=e("json3"),s=e("events").EventEmitter,l=e("../version"),r=e("../utils/url"),c=e("../utils/iframe"),d=e("../utils/event"),u=e("../utils/random");a(i,s),i.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){d.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},i.prototype._message=function(e){if(r.isOriginEqual(e.origin,this.origin)){var t;try{t=o.parse(e.data)}catch(e){return}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",o.stringify([l,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=o.parse(t.data)}catch(e){return}this.emit("close",n[0],n[1]),this.close()}}},i.prototype.postMessage=function(e,t){this.iframeObj.post(o.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},i.prototype.send=function(e){this.postMessage("m",e)},i.enabled=function(){return c.iframeEnabled},i.transportName="iframe",i.roundTrips=2,t.exports=i},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:void 0,events:3,inherits:54,json3:55}],23:[function(t,n,i){(function(e){function i(e){if(!i.enabled())throw new Error("Transport created when disabled");o.call(this,e,"/jsonp",l,s)}var a=t("inherits"),o=t("./lib/sender-receiver"),s=t("./receiver/jsonp"),l=t("./sender/jsonp");a(i,o),i.enabled=function(){return!!e.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(e,t,n){function i(e,t,n,i){s.call(this,e,t,function(e){return function(t,n,i){var a={};"string"==typeof n&&(a.headers={"Content-type":"text/plain"});var s=o.addPath(t,"/xhr_send"),l=new e("POST",s,n,a);return l.once("finish",function(e){return l=null,200!==e&&204!==e?i(new Error("http status "+e)):void i()}),function(){l.close(),l=null;var e=new Error("Aborted");e.code=1e3,i(e)}}}(i),n,i)}var a=e("inherits"),o=e("../../utils/url"),s=e("./sender-receiver");a(i,s),t.exports=i},{"../../utils/url":52,"./sender-receiver":28,debug:void 0,inherits:54}],25:[function(e,t,n){function i(e,t){o.call(this),this.sendBuffer=[],this.sender=t,this.url=e}var a=e("inherits"),o=e("events").EventEmitter;a(i,o),i.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){t.sendStop=null,t.sendSchedule()},25)},i.prototype.sendSchedule=function(){var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=i},{debug:void 0,events:3,inherits:54}],26:[function(t,n,i){(function(e){var i=t("inherits"),a=t("../iframe"),o=t("../../utils/object");n.exports=function(t){function n(e,n){a.call(this,t.transportName,e,n)}return i(n,a),n.enabled=function(n,i){if(!e.document)return!1;var s=o.extend({},i);return s.sameOrigin=!0,t.enabled(s)&&a.enabled()},n.transportName="iframe-"+t.transportName,n.needBody=!0,n.roundTrips=a.roundTrips+t.roundTrips-1,n.facadeTransport=t,n}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(e,t,n){function i(e,t,n){o.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}var a=e("inherits"),o=e("events").EventEmitter;a(i,o),i.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){e.emit("message",t)}),t.once("close",function(n,i){e.poll=t=null,e.pollIsClosing||("network"===i?e._scheduleReceiver():(e.emit("close",n||1006,i),e.removeAllListeners()))})},i.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=i},{debug:void 0,events:3,inherits:54}],28:[function(e,t,n){function i(e,t,n,i,a){var r=o.addPath(e,t),c=this;s.call(this,e,n),this.poll=new l(i,r,a),this.poll.on("message",function(e){c.emit("message",e)}),this.poll.once("close",function(e,t){c.poll=null,c.emit("close",e,t),c.close()})}var a=e("inherits"),o=e("../../utils/url"),s=e("./buffered-sender"),l=e("./polling");a(i,s),i.prototype.close=function(){s.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},t.exports=i},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:void 0,inherits:54}],29:[function(e,t,n){function i(e){o.call(this);var t=this,n=this.es=new s(e);n.onmessage=function(e){t.emit("message",decodeURI(e.data))},n.onerror=function(e){var i=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(i)}}var a=e("inherits"),o=e("events").EventEmitter,s=e("eventsource");a(i,o),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},i.prototype._close=function(e){var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},t.exports=i},{debug:void 0,events:3,eventsource:18,inherits:54}],30:[function(t,n,i){(function(e){function i(t){l.call(this);var n=this;o.polluteGlobalNamespace(),this.id="a"+r.string(6),t=s.addQuery(t,"c="+decodeURIComponent(o.WPrefix+"."+this.id));var a=i.htmlfileEnabled?o.createHtmlfile:o.createIframe;e[o.WPrefix][this.id]={start:function(){n.iframeObj.loaded()},message:function(e){n.emit("message",e)},stop:function(){n._cleanup(),n._close("network")}},this.iframeObj=a(t,function(){n._cleanup(),n._close("permanent")})}var a=t("inherits"),o=t("../../utils/iframe"),s=t("../../utils/url"),l=t("events").EventEmitter,r=t("../../utils/random");a(i,l),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete e[o.WPrefix][this.id]},i.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},i.htmlfileEnabled=!1;var c=["Active"].concat("Object").join("X");if(c in e)try{i.htmlfileEnabled=!!new e[c]("htmlfile")}catch(e){}i.enabled=i.htmlfileEnabled||o.iframeEnabled,n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],31:[function(t,n,i){(function(e){function i(t){var n=this;c.call(this),a.polluteGlobalNamespace(),this.id="a"+o.string(6);var s=l.addQuery(t,"c="+encodeURIComponent(a.WPrefix+"."+this.id));e[a.WPrefix][this.id]=this._callback.bind(this),this._createScript(s),this.timeoutId=setTimeout(function(){n._abort(new Error("JSONP script loaded abnormally (timeout)"))},i.timeout)}var a=t("../../utils/iframe"),o=t("../../utils/random"),s=t("../../utils/browser"),l=t("../../utils/url"),r=t("inherits"),c=t("events").EventEmitter;r(i,c),i.prototype.abort=function(){if(e[a.WPrefix][this.id]){var t=new Error("JSONP user aborted read");t.code=1e3,this._abort(t)}},i.timeout=35e3,i.scriptErrorTimeout=1e3,i.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},i.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},i.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete e[a.WPrefix][this.id]},i.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},i.scriptErrorTimeout))},i.prototype._createScript=function(t){var n,i=this,a=this.script=e.document.createElement("script");if(a.id="a"+o.string(8),a.src=t,a.type="text/javascript",a.charset="UTF-8",a.onerror=this._scriptError.bind(this),a.onload=function(){i._abort(new Error("JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){i.loadedOkay=!0;try{a.onclick()}catch(e){}}a&&i._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===a.async&&e.document.attachEvent)if(s.isOpera())(n=this.script2=e.document.createElement("script")).text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=n.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(t){}a.async=!0}void 0!==a.async&&(a.async=!0);var l=e.document.getElementsByTagName("head")[0];l.insertBefore(a,l.firstChild),n&&l.insertBefore(n,l.firstChild)},n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],32:[function(e,t,n){function i(e,t){o.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){n._chunkHandler(e,t),n.xo=null;var i=200===e?"network":"permanent";n.emit("close",null,i),n._cleanup()})}var a=e("inherits"),o=e("events").EventEmitter;a(i,o),i.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var i=t.slice(this.bufferPosition);if(-1===(n=i.indexOf("\n")))break;var a=i.slice(0,n);a&&this.emit("message",a)}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=i},{debug:void 0,events:3,inherits:54}],33:[function(t,n,i){(function(e){function i(t){try{return e.document.createElement('<iframe name="'+t+'">')}catch(i){var n=e.document.createElement("iframe");return n.name=t,n}}function a(){(o=e.document.createElement("form")).style.display="none",o.style.position="absolute",o.method="POST",o.enctype="application/x-www-form-urlencoded",o.acceptCharset="UTF-8",(s=e.document.createElement("textarea")).name="d",o.appendChild(s),e.document.body.appendChild(o)}var o,s,l=t("../../utils/random"),r=t("../../utils/url");n.exports=function(e,t,n){o||a();var c="a"+l.string(8);o.target=c,o.action=r.addQuery(r.addPath(e,"/jsonp_send"),"i="+c);var d=i(c);d.id=c,d.style.display="none",o.appendChild(d);try{s.value=t}catch(e){}o.submit();var u=function(e){d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){d.parentNode.removeChild(d),d=null},500),s.value="",n(e))};return d.onerror=function(){u()},d.onload=function(){u()},d.onreadystatechange=function(e){"complete"===d.readyState&&u()},function(){u(new Error("Aborted"))}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:void 0}],34:[function(t,n,i){(function(e){function i(e,t,n){var i=this;a.call(this),setTimeout(function(){i._start(e,t,n)},0)}var a=t("events").EventEmitter,o=t("inherits"),s=t("../../utils/event"),l=t("../../utils/browser"),r=t("../../utils/url");o(i,a),i.prototype._start=function(t,n,i){var a=this,o=new e.XDomainRequest;n=r.addQuery(n,"t="+ +new Date),o.onerror=function(){a._error()},o.ontimeout=function(){a._error()},o.onprogress=function(){a.emit("chunk",200,o.responseText)},o.onload=function(){a.emit("finish",200,o.responseText),a._cleanup(!1)},this.xdr=o,this.unloadRef=s.unloadAdd(function(){a._cleanup(!0)});try{this.xdr.open(t,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(i)}catch(t){this._error()}},i.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},i.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},i.prototype.close=function(){this._cleanup(!0)},i.enabled=!(!e.XDomainRequest||!l.hasDomain()),n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],35:[function(e,t,n){function i(e,t,n,i){o.call(this,e,t,n,i)}var a=e("inherits"),o=e("../driver/xhr");a(i,o),i.enabled=o.enabled&&o.supportsCORS,t.exports=i},{"../driver/xhr":17,inherits:54}],36:[function(e,t,n){function i(){var e=this;a.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},i.timeout)}var a=e("events").EventEmitter;e("inherits")(i,a),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,t.exports=i},{events:3,inherits:54}],37:[function(e,t,n){function i(e,t,n){o.call(this,e,t,n,{noCredentials:!0})}var a=e("inherits"),o=e("../driver/xhr");a(i,o),i.enabled=o.enabled,t.exports=i},{"../driver/xhr":17,inherits:54}],38:[function(e,t,n){function i(e,t,n){if(!i.enabled())throw new Error("Transport created when disabled");l.call(this);var s=this,c=o.addPath(e,"/websocket");c="https"===c.slice(0,5)?"wss"+c.slice(5):"ws"+c.slice(4),this.url=c,this.ws=new r(this.url,[],n),this.ws.onmessage=function(e){s.emit("message",e.data)},this.unloadRef=a.unloadAdd(function(){s.ws.close()}),this.ws.onclose=function(e){s.emit("close",e.code,e.reason),s._cleanup()},this.ws.onerror=function(e){s.emit("close",1006,"WebSocket connection broken"),s._cleanup()}}var a=e("../utils/event"),o=e("../utils/url"),s=e("inherits"),l=e("events").EventEmitter,r=e("./driver/websocket");s(i,l),i.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},i.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},i.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),a.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},i.enabled=function(){return!!r},i.transportName="websocket",i.roundTrips=2,t.exports=i},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:void 0,events:3,inherits:54}],39:[function(e,t,n){function i(e){if(!r.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",l,r)}var a=e("inherits"),o=e("./lib/ajax-based"),s=e("./xdr-streaming"),l=e("./receiver/xhr"),r=e("./sender/xdr");a(i,o),i.enabled=s.enabled,i.transportName="xdr-polling",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(e,t,n){function i(e){if(!l.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",s,l)}var a=e("inherits"),o=e("./lib/ajax-based"),s=e("./receiver/xhr"),l=e("./sender/xdr");a(i,o),i.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&l.enabled&&e.sameScheme},i.transportName="xdr-streaming",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(e,t,n){function i(e){if(!r.enabled&&!l.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr",s,l)}var a=e("inherits"),o=e("./lib/ajax-based"),s=e("./receiver/xhr"),l=e("./sender/xhr-cors"),r=e("./sender/xhr-local");a(i,o),i.enabled=function(e){return!e.nullOrigin&&(!(!r.enabled||!e.sameOrigin)||l.enabled)},i.transportName="xhr-polling",i.roundTrips=2,t.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(t,n,i){(function(e){function i(e){if(!r.enabled&&!l.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",s,l)}var a=t("inherits"),o=t("./lib/ajax-based"),s=t("./receiver/xhr"),l=t("./sender/xhr-cors"),r=t("./sender/xhr-local"),c=t("../utils/browser");a(i,o),i.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&l.enabled},i.transportName="xhr-streaming",i.roundTrips=2,i.needBody=!!e.document,n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],43:[function(t,n,i){(function(e){e.crypto&&e.crypto.getRandomValues?n.exports.randomBytes=function(t){var n=new Uint8Array(t);return e.crypto.getRandomValues(n),n}:n.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,n,i){(function(e){n.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(e){return!1}}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){var i,a=e("json3"),o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;t.exports={quote:function(e){var t=a.stringify(e);return o.lastIndex=0,o.test(t)?(i||(i=function(e){var t,n={},i=[];for(t=0;t<65536;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n}(o)),t.replace(o,function(e){return i[e]})):t}}},{json3:55}],46:[function(t,n,i){(function(e){var i=t("./random"),a={},o=!1,s=e.chrome&&e.chrome.app&&e.chrome.app.runtime;n.exports={attachEvent:function(t,n){void 0!==e.addEventListener?e.addEventListener(t,n,!1):e.document&&e.attachEvent&&(e.document.attachEvent("on"+t,n),e.attachEvent("on"+t,n))},detachEvent:function(t,n){void 0!==e.addEventListener?e.removeEventListener(t,n,!1):e.document&&e.detachEvent&&(e.document.detachEvent("on"+t,n),e.detachEvent("on"+t,n))},unloadAdd:function(e){if(s)return null;var t=i.string(8);return a[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in a&&delete a[e]},triggerUnloadCallbacks:function(){for(var e in a)a[e](),delete a[e]}};s||n.exports.attachEvent("unload",function(){o||(o=!0,n.exports.triggerUnloadCallbacks())})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(t,n,i){(function(e){var i=t("./event"),a=t("json3"),o=t("./browser");n.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){n.exports.WPrefix in e||(e[n.exports.WPrefix]={})},postMessage:function(t,i){e.parent!==e&&e.parent.postMessage(a.stringify({windowId:n.exports.currentWindowId,type:t,data:i||""}),"*")},createIframe:function(t,n){var a,o,s=e.document.createElement("iframe"),l=function(){clearTimeout(a);try{s.onload=null}catch(e){}s.onerror=null},r=function(){s&&(l(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),i.unloadDel(o))},c=function(e){s&&(r(),n(e))};return s.src=t,s.style.display="none",s.style.position="absolute",s.onerror=function(){c("onerror")},s.onload=function(){clearTimeout(a),a=setTimeout(function(){c("onload timeout")},2e3)},e.document.body.appendChild(s),a=setTimeout(function(){c("timeout")},15e3),o=i.unloadAdd(r),{post:function(e,t){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:r,loaded:l}},createHtmlfile:function(t,a){var o,s,l,r=["Active"].concat("Object").join("X"),c=new e[r]("htmlfile"),d=function(){clearTimeout(o),l.onerror=null},u=function(){c&&(d(),i.unloadDel(s),l.parentNode.removeChild(l),l=c=null,CollectGarbage())},p=function(e){c&&(u(),a(e))};c.open(),c.write('<html><script>document.domain="'+e.document.domain+'";<\/script></html>'),c.close(),c.parentWindow[n.exports.WPrefix]=e[n.exports.WPrefix];var m=c.createElement("div");return c.body.appendChild(m),l=c.createElement("iframe"),m.appendChild(l),l.src=t,l.onerror=function(){p("onerror")},o=setTimeout(function(){p("timeout")},15e3),s=i.unloadAdd(u),{post:function(e,t){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:u,loaded:d}}},n.exports.iframeEnabled=!1,e.document&&(n.exports.iframeEnabled=("function"==typeof e.postMessage||"object"==c()(e.postMessage))&&!o.isKonqueror())}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:void 0,json3:55}],48:[function(t,n,i){(function(e){var t={};["log","debug","warn"].forEach(function(n){var i;try{i=e.console&&e.console[n]&&e.console[n].apply}catch(e){}t[n]=i?function(){return e.console[n].apply(e.console,arguments)}:"log"===n?function(){}:t.log}),n.exports=t}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){t.exports={isObject:function(e){var t=void 0===e?"undefined":c()(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,i=1,a=arguments.length;i<a;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},{}],50:[function(e,t,n){var i=e("crypto"),a="abcdefghijklmnopqrstuvwxyz012345";t.exports={string:function(e){for(var t=a.length,n=i.randomBytes(e),o=[],s=0;s<e;s++)o.push(a.substr(n[s]%t,1));return o.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,n){t.exports=function(e){return{filterToEnabled:function(t,n){var i={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"===e.transportName&&!1===n.websocket||t.length&&-1===t.indexOf(e.transportName)||e.enabled(n)&&(i.main.push(e),e.facadeTransport&&i.facade.push(e.facadeTransport)))}),i}}}},{debug:void 0}],52:[function(e,t,n){var i=e("url-parse");t.exports={getOrigin:function(e){if(!e)return null;var t=new i(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},{debug:void 0,"url-parse":58}],53:[function(e,t,n){t.exports="1.1.2"},{}],54:[function(e,t,n){"function"==typeof o.a?t.exports=function(e,t){e.super_=t,e.prototype=o()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],55:[function(t,n,i){(function(e){(function(){function t(e,n){function i(e){if(i[e]!==v)return i[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=i("json-stringify")&&i("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=n.stringify,c="function"==typeof r&&x;if(c){(a=function(){return 1}).toJSON=a;try{c="0"===r(0)&&"0"===r(new o)&&'""'==r(new l)&&r(y)===v&&r(v)===v&&r()===v&&"1"===r(a)&&"[1]"==r([a])&&"[null]"==r([v])&&"null"==r(null)&&"[null,null,null]"==r([v,y,null])&&r({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===r(null,a)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new d(-1))}catch(e){c=!1}}t=c}if("json-parse"==e){var u=n.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){var p=5==(a=u(s)).a.length&&1===a.a[0];if(p){try{p=!u('"\t"')}catch(e){}if(p)try{p=1!==u("01")}catch(e){}if(p)try{p=1!==u("1.")}catch(e){}}}}catch(e){p=!1}t=p}}return i[e]=!!t}e||(e=s.Object()),n||(n=s.Object());var o=e.Number||s.Number,l=e.String||s.String,r=e.Object||s.Object,d=e.Date||s.Date,u=e.SyntaxError||s.SyntaxError,p=e.TypeError||s.TypeError,m=e.Math||s.Math,h=e.JSON||s.JSON;"object"==(void 0===h?"undefined":c()(h))&&h&&(n.stringify=h.stringify,n.parse=h.parse);var f,g,v,b=r.prototype,y=b.toString,x=new d(-0xc782b5b800cec);try{x=-109252==x.getUTCFullYear()&&0===x.getUTCMonth()&&1===x.getUTCDate()&&10==x.getUTCHours()&&37==x.getUTCMinutes()&&6==x.getUTCSeconds()&&708==x.getUTCMilliseconds()}catch(e){}if(!i("json")){var w="[object Function]",_="[object Number]",j="[object String]",k="[object Array]",S=i("bug-string-char-index");if(!x)var A=m.floor,I=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(e,t){return I[t]+365*(e-1970)+A((e-1969+(t=+(t>1)))/4)-A((e-1901+t)/100)+A((e-1601+t)/400)};if((f=b.hasOwnProperty)||(f=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?f=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,f=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,f.call(this,e)}),g=function(e,t){var n,i,o,s=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n)f.call(i,o)&&s++;return n=i=null,s?g=2==s?function(e,t){var n,i={},a=y.call(e)==w;for(n in e)a&&"prototype"==n||f.call(i,n)||!(i[n]=1)||!f.call(e,n)||t(n)}:function(e,t){var n,i,a=y.call(e)==w;for(n in e)a&&"prototype"==n||!f.call(e,n)||(i="constructor"===n)||t(n);(i||f.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,o,s=y.call(e)==w,l=!s&&"function"!=typeof e.constructor&&a[c()(e.hasOwnProperty)]&&e.hasOwnProperty||f;for(n in e)s&&"prototype"==n||!l.call(e,n)||t(n);for(o=i.length;n=i[--o];l.call(e,n)&&t(n));}),g(e,t)},!i("json-stringify")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T=function(e,t){return("000000"+(t||0)).slice(-e)},E=function(e){for(var t='"',n=0,i=e.length,a=!S||i>10,o=a&&(S?e.split(""):e);n<i;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=C[s];break;default:if(s<32){t+="\\u00"+T(2,s.toString(16));break}t+=a?o[n]:e.charAt(n)}}return t+'"'};n.stringify=function(e,t,n){var i,o,s,l;if(a[void 0===t?"undefined":c()(t)]&&t)if((l=y.call(t))==w)o=t;else if(l==k){s={};for(var r,d=0,u=t.length;d<u;r=t[d++],((l=y.call(r))==j||l==_)&&(s[r]=1));}if(n)if((l=y.call(n))==_){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else l==j&&(i=n.length<=10?n:n.slice(0,10));return function e(t,n,i,a,o,s,l){var r,d,u,m,h,b,x,w,S,I,C,P,N,M,B,V;try{r=n[t]}catch(t){}if("object"==(void 0===r?"undefined":c()(r))&&r)if("[object Date]"!=(d=y.call(r))||f.call(r,"toJSON"))"function"==typeof r.toJSON&&(d!=_&&d!=j&&d!=k||f.call(r,"toJSON"))&&(r=r.toJSON(t));else if(r>-1/0&&r<1/0){if(D){for(h=A(r/864e5),u=A(h/365.2425)+1970-1;D(u+1,0)<=h;u++);for(m=A((h-D(u,0))/30.42);D(u,m+1)<=h;m++);h=1+h-D(u,m),x=A((b=(r%864e5+864e5)%864e5)/36e5)%24,w=A(b/6e4)%60,S=A(b/1e3)%60,I=b%1e3}else u=r.getUTCFullYear(),m=r.getUTCMonth(),h=r.getUTCDate(),x=r.getUTCHours(),w=r.getUTCMinutes(),S=r.getUTCSeconds(),I=r.getUTCMilliseconds();r=(u<=0||u>=1e4?(u<0?"-":"+")+T(6,u<0?-u:u):T(4,u))+"-"+T(2,m+1)+"-"+T(2,h)+"T"+T(2,x)+":"+T(2,w)+":"+T(2,S)+"."+T(3,I)+"Z"}else r=null;if(i&&(r=i.call(n,t,r)),null===r)return"null";if("[object Boolean]"==(d=y.call(r)))return""+r;if(d==_)return r>-1/0&&r<1/0?""+r:"null";if(d==j)return E(""+r);if("object"==(void 0===r?"undefined":c()(r))){for(M=l.length;M--;)if(l[M]===r)throw p();if(l.push(r),C=[],B=s,s+=o,d==k){for(N=0,M=r.length;N<M;N++)P=e(N,r,i,a,o,s,l),C.push(P===v?"null":P);V=C.length?o?"[\n"+s+C.join(",\n"+s)+"\n"+B+"]":"["+C.join(",")+"]":"[]"}else g(a||r,function(t){var n=e(t,r,i,a,o,s,l);n!==v&&C.push(E(t)+":"+(o?" ":"")+n)}),V=C.length?o?"{\n"+s+C.join(",\n"+s)+"\n"+B+"}":"{"+C.join(",")+"}":"{}";return l.pop(),V}}("",((r={})[""]=e,r),o,s,i,"",[])}}if(!i("json-parse")){var P,N,M=l.fromCharCode,B={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},V=function(){throw P=N=null,u()},R=function(){for(var e,t,n,i,a,o=N,s=o.length;P<s;)switch(a=o.charCodeAt(P)){case 9:case 10:case 13:case 32:P++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=S?o.charAt(P):o[P],P++,e;case 34:for(e="@",P++;P<s;)if((a=o.charCodeAt(P))<32)V();else if(92==a)switch(a=o.charCodeAt(++P)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=B[a],P++;break;case 117:for(t=++P,n=P+4;P<n;P++)(a=o.charCodeAt(P))>=48&&a<=57||a>=97&&a<=102||a>=65&&a<=70||V();e+=M("0x"+o.slice(t,P));break;default:V()}else{if(34==a)break;for(a=o.charCodeAt(P),t=P;a>=32&&92!=a&&34!=a;)a=o.charCodeAt(++P);e+=o.slice(t,P)}if(34==o.charCodeAt(P))return P++,e;V();default:if(t=P,45==a&&(i=!0,a=o.charCodeAt(++P)),a>=48&&a<=57){for(48==a&&((a=o.charCodeAt(P+1))>=48&&a<=57)&&V(),i=!1;P<s&&((a=o.charCodeAt(P))>=48&&a<=57);P++);if(46==o.charCodeAt(P)){for(n=++P;n<s&&((a=o.charCodeAt(n))>=48&&a<=57);n++);n==P&&V(),P=n}if(101==(a=o.charCodeAt(P))||69==a){for(43!=(a=o.charCodeAt(++P))&&45!=a||P++,n=P;n<s&&((a=o.charCodeAt(n))>=48&&a<=57);n++);n==P&&V(),P=n}return+o.slice(t,P)}if(i&&V(),"true"==o.slice(P,P+4))return P+=4,!0;if("false"==o.slice(P,P+5))return P+=5,!1;if("null"==o.slice(P,P+4))return P+=4,null;V()}return"$"},z=function(e,t,n){var i=L(e,t,n);i===v?delete e[t]:e[t]=i},L=function(e,t,n){var i,a=e[t];if("object"==(void 0===a?"undefined":c()(a))&&a)if(y.call(a)==k)for(i=a.length;i--;)z(a,i,n);else g(a,function(e){z(a,e,n)});return n.call(e,t,a)};n.parse=function(e,t){var n,i;return P=0,N=""+e,n=function e(t){var n,i;if("$"==t&&V(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=R());i||(i=!0))i&&(","==t?"]"==(t=R())&&V():V()),","==t&&V(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=R());i||(i=!0))i&&(","==t?"}"==(t=R())&&V():V()),","!=t&&"string"==typeof t&&"@"==(S?t.charAt(0):t[0])&&":"==R()||V(),n[t.slice(1)]=e(R());return n}V()}return t}(R()),"$"!=R()&&V(),P=N=null,t&&y.call(t)==w?L(((i={})[""]=n,i),"",t):n}}}return n.runInContext=t,n}var a={function:!0,object:!0},o=a[void 0===i?"undefined":c()(i)]&&i&&!i.nodeType&&i,s=a["undefined"==typeof window?"undefined":c()(window)]&&window||this,l=o&&a[void 0===n?"undefined":c()(n)]&&n&&!n.nodeType&&"object"==(void 0===e?"undefined":c()(e))&&e;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(s=l),o)t(s,o);else{var r=s.JSON,d=s.JSON3,u=!1,p=t(s,s.JSON3={noConflict:function(){return u||(u=!0,s.JSON=r,s.JSON3=d,r=d=null),p}});s.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(e,t,n){var i=Object.prototype.hasOwnProperty;n.stringify=function(e,t){t=t||"";var n=[];for(var a in"string"!=typeof t&&(t="?"),e)i.call(e,a)&&n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return n.length?t+n.join("&"):""},n.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,i={};t=n.exec(e);i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return i}},{}],57:[function(e,t,n){t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],58:[function(e,t,n){function i(e){var t=r.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var r,u,p,m,h,f,g=d.slice(),v=void 0===t?"undefined":c()(t),b=this,y=0;for("object"!==v&&"string"!==v&&(n=t,t=null),n&&"function"!=typeof n&&(n=l.parse),t=s(t),r=!(u=i(e||"")).protocol&&!u.slashes,b.slashes=u.slashes||r&&t.slashes,b.protocol=u.protocol||t.protocol||"",e=u.rest,u.slashes||(g[2]=[/(.*)/,"pathname"]);y<g.length;y++)p=(m=g[y])[0],f=m[1],p!=p?b[f]=e:"string"==typeof p?~(h=e.indexOf(p))&&("number"==typeof m[2]?(b[f]=e.slice(0,h),e=e.slice(h+m[2])):(b[f]=e.slice(h),e=e.slice(0,h))):(h=p.exec(e))&&(b[f]=h[1],e=e.slice(0,h.index)),b[f]=b[f]||r&&m[3]&&t[f]||"",m[4]&&(b[f]=b[f].toLowerCase());n&&(b.query=n(b.query)),r&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=n.length,a=n[i-1],o=!1,s=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),s++):s&&(0===i&&(o=!0),n.splice(i,1),s--);return o&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}(b.pathname,t.pathname)),o(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(m=b.auth.split(":"),b.username=m[0]||"",b.password=m[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}var o=e("requires-port"),s=e("./lolcation"),l=e("querystringify"),r=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,d=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];a.prototype.set=function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||l.parse)(t)),i[e]=t;break;case"port":i[e]=t,o(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":i.pathname=t.length&&"/"!==t.charAt(0)?"/"+t:t;break;default:i[e]=t}for(var a=0;a<d.length;a++){var s=d[a];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},a.prototype.toString=function(e){e&&"function"==typeof e||(e=l.stringify);var t,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var a=i+(n.slashes?"//":"");return n.username&&(a+=n.username,n.password&&(a+=":"+n.password),a+="@"),a+=n.host+n.pathname,(t="object"==c()(n.query)?e(n.query):n.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a},a.extractProtocol=i,a.location=s,a.qs=l,t.exports=a},{"./lolcation":59,querystringify:56,"requires-port":57}],59:[function(t,n,i){(function(e){var i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o={hash:1,query:1};n.exports=function(n){n=n||e.location||{},i=i||t("./");var s,l={},r=void 0===n?"undefined":c()(n);if("blob:"===n.protocol)l=new i(unescape(n.pathname),{});else if("string"===r)for(s in l=new i(n,{}),o)delete l[s];else if("object"===r){for(s in n)s in o||(l[s]=n[s]);void 0===l.slashes&&(l.slashes=a.test(n.href))}return l}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":58}]},{},[1])(1)})}.call(t,n("DuR2"),n("f1Eh")(e))},K1Mp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{prjs:[],keywords:"",fileUploadBtnText:"导入数据",beginDateScope:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,prjTypes:[{id:-1,name:"请选择项目类型"},{id:1,name:"派单类"},{id:2,name:"实施类"},{id:3,name:"人月类"}],customs:[{id:-1,name:"请选择所属客户"},{id:1,name:"交通银行"},{id:2,name:"广东发展银行"}],deps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,advSearchData:{name:"",customId:-1,customName:"请选择客户",departmentId:-1,departmentName:"请选择部门",prjTypeId:-1,prjClassId:0,beginDateScope:""},prj:{id:-1,projectNo:"",name:"",simpleName:"",contractNo:"",prjTypeId:-1,prjClassId:-1,departmentId:"",departmentName:"所属部门...",beginDate:"",endDate:"",customId:-1,customName:"",userName:"",totalPeopleMonth:0,budgetPeopleMonth:0,contractAmount:0,costAmount:0,labourAmount:0,expenseAmount:0,labourBudget:0,expenseBudget:0},rules:{name:[{required:!0,message:"必填:项目名称",trigger:"blur"}],projectNo:[{required:!0,message:"必填:项目编号",trigger:"blur"}],departmentId:[{required:!0,message:"必填:所属部门",trigger:"change"}],customId:[{required:!0,message:"必填:所属客户",trigger:"change"}],beginDate:[{required:!0,message:"必填:启动日期",trigger:"blur"}],endDate:[{required:!0,message:"必填:结束日期",trigger:"blur"}]}}},mounted:function(){this.initData(),this.loadPrjs()},methods:{fileUploadSuccess:function(e,t,n){e&&this.$message({type:e.status,message:e.msg}),this.loadEmps(),this.fileUploadBtnText="导入数据"},fileUploadError:function(e,t,n){this.$message({type:"error",message:"导入失败!"}),this.fileUploadBtnText="导入数据"},beforeFileUpload:function(e){this.fileUploadBtnText="正在导入"},exportEmps:function(){window.open("/employee/basic/exportEmp","_parent")},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyEmpData(),this.beginDateScope="",this.loadEmps()},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyPrjData(),this.beginDateScope="",this.loadPrjs())},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyPrjs:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",n=0;n<e.multipleSelection.length;n++)t+=e.multipleSelection[n].id+",";e.doDelete(t)}).catch(function(){})},deletePrj:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/project/basic/prj/"+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){var n=e.data;t.$message({type:n.status,message:n.msg}),t.loadPrjs()}})},keywordsChange:function(e){""==e&&this.loadPrjs()},searchPrj:function(){this.loadPrjs()},currentChange:function(e){this.currentPage=e,this.loadPrjs()},loadPrjs:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/project/basic/prj?page="+this.currentPage+"&size=10&keywords="+this.keywords+"&politicId="+this.prj.politicId+"&nationId="+this.prj.nationId+"&posId="+this.prj.posId+"&jobLevelId="+this.prj.jobLevelId+"&engageForm="+this.prj.engageForm+"&departmentId="+this.prj.departmentId+"&beginDateScope="+this.beginDateScope).then(function(n){if(e.tableLoading=!1,n&&200==n.status){var i=n.data;t.prjs=i.prjs,t.totalCount=i.count}})},addPrj:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.prj.id?(t.tableLoading=!0,t.putRequest("/project/basic/prj",t.prj).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyPrjData(),n.loadPrjs()}})):(t.tableLoading=!0,t.postRequest("/project/basic/prj",t.prj).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyPrjData(),n.loadPrjs()}}))})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.prj.departmentName=e.name,this.prj.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.advSearchData.departmentName=e.name,this.advSearchData.departmentId=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},initData:function(){var e=this;this.getRequest("/project/basic/prj").then(function(t){if(t&&200==t.status){var n=t.data;e.nations=n.nations,e.politics=n.politics,e.prjs=n.prjs,e.positions=n.positions,e.joblevels=n.joblevels,e.prj.workID=n.workID}})},showEditPrjView:function(e){console.log(e),this.dialogTitle="编辑项目信息",this.prj=e,this.prj.birthday=this.formatDate(e.birthday),this.prj.conversionTime=this.formatDate(e.conversionTime),this.prj.beginContract=this.formatDate(e.beginContract),this.prj.endContract=this.formatDate(e.endContract),this.prj.beginDate=this.formatDate(e.beginDate),this.prj.nationId=e.nation.id,this.prj.politicId=e.politicsStatus.id,this.prj.departmentId=e.department.id,this.prj.departmentName=e.department.name,this.prj.jobLevelId=e.jobLevel.id,this.prj.posId=e.position.id,delete this.prj.workAge,delete this.prj.notWorkDate,this.dialogVisible=!0},showAddPrjView:function(){this.dialogTitle="添加新项目",this.emptyPrjData(),this.dialogVisible=!0;var e=this;this.getRequest("/employee/basic/maxWorkID").then(function(t){t&&200==t.status&&(e.prj.workID=t.data)})},emptyPrjData:function(){this.prj={name:"",gender:"",birthday:"",idCard:"",wedlock:"",nationId:"",nativePlace:"",politicId:"",email:"",phone:"",address:"",departmentId:"",departmentName:"所属部门...",jobLevelId:"",posId:"",engageForm:"",tiptopDegree:"",specialty:"",school:"",beginDate:"",workState:"",workID:"",contractTerm:"",conversionTime:"",notWorkDate:"",beginContract:"",endContract:"",customId:"",customName:"",prjTypeId:"",workAge:""}}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[n("div",{staticStyle:{display:"inline"}},[n("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"客户名称搜索，记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchPrj(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchPrj}},[e._v("搜索\n          ")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[n("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n          ")])],1),e._v(" "),n("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[n("el-upload",{staticStyle:{display:"inline"},attrs:{"show-file-list":!1,accept:"application/vnd.ms-excel",action:"/project/basic/importPrj","on-success":e.fileUploadSuccess,"on-error":e.fileUploadError,disabled:"正在导入"==e.fileUploadBtnText,"before-upload":e.beforeFileUpload}},[n("el-button",{attrs:{size:"mini",type:"success",loading:"正在导入"==e.fileUploadBtnText}},[n("i",{staticClass:"fa fa-lg fa-level-up",staticStyle:{"margin-right":"5px"}}),e._v(e._s(e.fileUploadBtnText)+"\n            ")])],1),e._v(" "),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.exportEmps}},[n("i",{staticClass:"fa fa-lg fa-level-down",staticStyle:{"margin-right":"5px"}}),e._v("导出数据\n          ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.showAddPrjView}},[e._v("\n            添加客户联系人\n          ")])],1)]),e._v(" "),n("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[n("div",[n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticStyle:{"margin-bottom":"10px",border:"1px","border-radius":"5px","border-style":"solid",padding:"15px","box-sizing":"border-box","border-color":"#20a0ff"}},[n("el-form",{attrs:{inline:!0,model:e.advSearchData}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属客户:",prop:"customId"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择所属客户"},model:{value:e.advSearchData.customId,callback:function(t){e.$set(e.advSearchData,"customId",t)},expression:"advSearchData.customId"}},e._l(e.customs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"项目类型:"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择项目类型"},model:{value:e.advSearchData.prjTypeId,callback:function(t){e.$set(e.advSearchData,"prjTypeId",t)},expression:"advSearchData.prjTypeId"}},e._l(e.prjTypes,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{label:"项目分类:",prop:"prjClassId"}},[n("el-radio-group",{model:{value:e.advSearchData.prjClassId,callback:function(t){e.$set(e.advSearchData,"prjClassId",t)},expression:"advSearchData.prjClassId"}},[n("el-radio",{attrs:{label:"全部"}},[e._v("全部")]),e._v(" "),n("el-radio",{attrs:{label:"延续形"}},[e._v("延续形")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"新项目"}},[e._v("新项目")])],1)],1)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属部门:",prop:"departmentName"}},[n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop2,callback:function(t){e.showOrHidePop2=t},expression:"showOrHidePop2"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick2}}),e._v(" "),n("div",{staticStyle:{width:"130px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree2},slot:"reference"},[e._v(e._s(e.advSearchData.departmentName)+"\n                    ")])],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{label:"立项日期:",prop:"beginDateScope"}},[n("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.advSearchData.beginDateScope,callback:function(t){e.$set(e.advSearchData,"beginDateScope",t)},expression:"advSearchData.beginDateScope"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:5,offset:2}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchPrj}},[e._v("搜索")])],1)],1)],1)],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.prjs,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),n("el-table-column",{attrs:{prop:"customName",align:"left",fixed:"",label:"客户名称",width:"90"}}),e._v(" "),n("el-table-column",{attrs:{prop:"contractNo",width:"85",align:"left",label:"合同编号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{prop:"projectNo",label:"项目编号",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"签订日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"incomeYear",width:"100",label:"确认收入年份"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"开工日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"department.name",align:"left",width:"100",label:"所属部门"}}),e._v(" "),n("el-table-column",{attrs:{prop:"amount",width:"80",align:"left",label:"合同金额"}}),e._v(" "),n("el-table-column",{attrs:{prop:"totalPeopleMonth",width:"80",align:"left",label:"人月总数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"budgetPeopleMonth",width:"80",align:"left",label:"预算人月总数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"costAmount",width:"80",align:"left",label:"成本合计"}}),e._v(" "),n("el-table-column",{attrs:{prop:"labourAmount",width:"80",align:"left",label:"人工成本"}}),e._v(" "),n("el-table-column",{attrs:{prop:"expenseAmount",width:"80",align:"left",label:"费用成本"}}),e._v(" "),n("el-table-column",{attrs:{prop:"labourBudget",width:"80",align:"left",label:"人工预算"}}),e._v(" "),n("el-table-column",{attrs:{prop:"expenseBudget",width:"80",align:"left",label:"费用预算"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(n){e.showEditPrjView(t.row)}}},[e._v("编辑\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"}},[e._v("项目预算\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(n){e.deletePrj(t.row)}}},[e._v("删除\n                ")])]}}])})],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.prjs.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyPrjs}},[e._v("批量删除\n            ")]):e._e(),e._v(" "),n("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),n("el-form",{ref:"addPrjForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.prj,rules:e.rules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"项目名称:",prop:"name"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{size:"mini",placeholder:"请输入项目名称"},model:{value:e.prj.name,callback:function(t){e.$set(e.prj,"name",t)},expression:"prj.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目编号:",prop:"projectNo"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请输入项目编号"},model:{value:e.prj.projectNo,callback:function(t){e.$set(e.prj,"projectNo",t)},expression:"prj.projectNo"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属客户:",prop:"customId"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择所属客户"},model:{value:e.prj.customId,callback:function(t){e.$set(e.prj,"customId",t)},expression:"prj.customId"}},e._l(e.customs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"项目类型:"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择项目类型"},model:{value:e.prj.prjTypeId,callback:function(t){e.$set(e.prj,"prjTypeId",t)},expression:"prj.prjTypeId"}},e._l(e.prjTypes,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{label:"项目分类:",prop:"prjClassId"}},[n("el-radio-group",{model:{value:e.prj.prjClassId,callback:function(t){e.$set(e.prj,"prjClassId",t)},expression:"prj.prjClassId"}},[n("el-radio",{attrs:{label:"延续形"}},[e._v("延续形")]),e._v(" "),n("el-radio",{attrs:{label:"新项目"}},[e._v("新项目")])],1)],1)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属部门:",prop:"departmentName"}},[n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),n("div",{staticStyle:{width:"230px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[e._v(e._s(e.prj.departmentName)+"\n                    ")])],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"启动日期:",prop:"beginDate"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"启动日期"},model:{value:e.prj.beginDate,callback:function(t){e.$set(e.prj,"beginDate",t)},expression:"prj.beginDate"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.prj.endDate,callback:function(t){e.$set(e.prj,"endDate",t)},expression:"prj.endDate"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addPrj("addPrjForm")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("TP9z")},null,null);t.default=o.exports},KBu4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{prjs:[],keywords:"",fileUploadBtnText:"导入数据",beginDateScope:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,prjTypes:[{id:-1,name:"请选择项目类型"},{id:1,name:"派单类"},{id:2,name:"实施类"},{id:3,name:"人月类"}],customs:[{id:-1,name:"请选择所属客户"},{id:1,name:"交通银行"},{id:2,name:"广东发展银行"}],deps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,advSearchData:{name:"",customId:-1,customName:"请选择客户",departmentId:-1,departmentName:"请选择部门",prjTypeId:-1,prjClassId:0,beginDateScope:""},prj:{id:-1,projectNo:"",name:"",simpleName:"",contractNo:"",prjTypeId:-1,prjClassId:-1,departmentId:"",departmentName:"所属部门...",beginDate:"",endDate:"",customId:-1,customName:"",userName:"",totalPeopleMonth:0,budgetPeopleMonth:0,contractAmount:0,costAmount:0,labourAmount:0,expenseAmount:0,labourBudget:0,expenseBudget:0},rules:{name:[{required:!0,message:"必填:项目名称",trigger:"blur"}],projectNo:[{required:!0,message:"必填:项目编号",trigger:"blur"}],departmentId:[{required:!0,message:"必填:所属部门",trigger:"change"}],customId:[{required:!0,message:"必填:所属客户",trigger:"change"}],beginDate:[{required:!0,message:"必填:启动日期",trigger:"blur"}],endDate:[{required:!0,message:"必填:结束日期",trigger:"blur"}]}}},mounted:function(){this.initData(),this.loadPrjs()},methods:{fileUploadSuccess:function(e,t,n){e&&this.$message({type:e.status,message:e.msg}),this.loadEmps(),this.fileUploadBtnText="导入数据"},fileUploadError:function(e,t,n){this.$message({type:"error",message:"导入失败!"}),this.fileUploadBtnText="导入数据"},beforeFileUpload:function(e){this.fileUploadBtnText="正在导入"},exportEmps:function(){window.open("/employee/basic/exportEmp","_parent")},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyEmpData(),this.beginDateScope="",this.loadEmps()},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyPrjData(),this.beginDateScope="",this.loadPrjs())},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyPrjs:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",n=0;n<e.multipleSelection.length;n++)t+=e.multipleSelection[n].id+",";e.doDelete(t)}).catch(function(){})},deletePrj:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/project/basic/prj/"+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){var n=e.data;t.$message({type:n.status,message:n.msg}),t.loadPrjs()}})},keywordsChange:function(e){""==e&&this.loadPrjs()},searchPrj:function(){this.loadPrjs()},currentChange:function(e){this.currentPage=e,this.loadPrjs()},loadPrjs:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/project/basic/prj?page="+this.currentPage+"&size=10&keywords="+this.keywords+"&politicId="+this.prj.politicId+"&nationId="+this.prj.nationId+"&posId="+this.prj.posId+"&jobLevelId="+this.prj.jobLevelId+"&engageForm="+this.prj.engageForm+"&departmentId="+this.prj.departmentId+"&beginDateScope="+this.beginDateScope).then(function(n){if(e.tableLoading=!1,n&&200==n.status){var i=n.data;t.prjs=i.prjs,t.totalCount=i.count}})},addPrj:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.prj.id?(t.tableLoading=!0,t.putRequest("/project/basic/prj",t.prj).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyPrjData(),n.loadPrjs()}})):(t.tableLoading=!0,t.postRequest("/project/basic/prj",t.prj).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyPrjData(),n.loadPrjs()}}))})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.prj.departmentName=e.name,this.prj.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.advSearchData.departmentName=e.name,this.advSearchData.departmentId=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},initData:function(){var e=this;this.getRequest("/project/basic/prj").then(function(t){if(t&&200==t.status){var n=t.data;e.nations=n.nations,e.politics=n.politics,e.prjs=n.prjs,e.positions=n.positions,e.joblevels=n.joblevels,e.prj.workID=n.workID}})},showEditPrjView:function(e){console.log(e),this.dialogTitle="编辑项目信息",this.prj=e,this.prj.birthday=this.formatDate(e.birthday),this.prj.conversionTime=this.formatDate(e.conversionTime),this.prj.beginContract=this.formatDate(e.beginContract),this.prj.endContract=this.formatDate(e.endContract),this.prj.beginDate=this.formatDate(e.beginDate),this.prj.nationId=e.nation.id,this.prj.politicId=e.politicsStatus.id,this.prj.departmentId=e.department.id,this.prj.departmentName=e.department.name,this.prj.jobLevelId=e.jobLevel.id,this.prj.posId=e.position.id,delete this.prj.workAge,delete this.prj.notWorkDate,this.dialogVisible=!0},showAddPrjView:function(){this.dialogTitle="添加新项目",this.emptyPrjData(),this.dialogVisible=!0;var e=this;this.getRequest("/employee/basic/maxWorkID").then(function(t){t&&200==t.status&&(e.prj.workID=t.data)})},emptyPrjData:function(){this.prj={name:"",gender:"",birthday:"",idCard:"",wedlock:"",nationId:"",nativePlace:"",politicId:"",email:"",phone:"",address:"",departmentId:"",departmentName:"所属部门...",jobLevelId:"",posId:"",engageForm:"",tiptopDegree:"",specialty:"",school:"",beginDate:"",workState:"",workID:"",contractTerm:"",conversionTime:"",notWorkDate:"",beginContract:"",endContract:"",customId:"",customName:"",prjTypeId:"",workAge:""}}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[n("div",{staticStyle:{display:"inline"}},[n("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"客户名称搜索，记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchPrj(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchPrj}},[e._v("搜索\n          ")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[n("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n          ")])],1),e._v(" "),n("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[n("el-upload",{staticStyle:{display:"inline"},attrs:{"show-file-list":!1,accept:"application/vnd.ms-excel",action:"/project/basic/importPrj","on-success":e.fileUploadSuccess,"on-error":e.fileUploadError,disabled:"正在导入"==e.fileUploadBtnText,"before-upload":e.beforeFileUpload}},[n("el-button",{attrs:{size:"mini",type:"success",loading:"正在导入"==e.fileUploadBtnText}},[n("i",{staticClass:"fa fa-lg fa-level-up",staticStyle:{"margin-right":"5px"}}),e._v(e._s(e.fileUploadBtnText)+"\n            ")])],1),e._v(" "),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.exportEmps}},[n("i",{staticClass:"fa fa-lg fa-level-down",staticStyle:{"margin-right":"5px"}}),e._v("导出数据\n          ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.showAddPrjView}},[e._v("\n            添加客户联系人\n          ")])],1)]),e._v(" "),n("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[n("div",[n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticStyle:{"margin-bottom":"10px",border:"1px","border-radius":"5px","border-style":"solid",padding:"15px","box-sizing":"border-box","border-color":"#20a0ff"}},[n("el-form",{attrs:{inline:!0,model:e.advSearchData}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属客户:",prop:"customId"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择所属客户"},model:{value:e.advSearchData.customId,callback:function(t){e.$set(e.advSearchData,"customId",t)},expression:"advSearchData.customId"}},e._l(e.customs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"项目类型:"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择项目类型"},model:{value:e.advSearchData.prjTypeId,callback:function(t){e.$set(e.advSearchData,"prjTypeId",t)},expression:"advSearchData.prjTypeId"}},e._l(e.prjTypes,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{label:"项目分类:",prop:"prjClassId"}},[n("el-radio-group",{model:{value:e.advSearchData.prjClassId,callback:function(t){e.$set(e.advSearchData,"prjClassId",t)},expression:"advSearchData.prjClassId"}},[n("el-radio",{attrs:{label:"全部"}},[e._v("全部")]),e._v(" "),n("el-radio",{attrs:{label:"延续形"}},[e._v("延续形")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"新项目"}},[e._v("新项目")])],1)],1)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属部门:",prop:"departmentName"}},[n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop2,callback:function(t){e.showOrHidePop2=t},expression:"showOrHidePop2"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick2}}),e._v(" "),n("div",{staticStyle:{width:"130px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree2},slot:"reference"},[e._v(e._s(e.advSearchData.departmentName)+"\n                    ")])],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{label:"立项日期:",prop:"beginDateScope"}},[n("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.advSearchData.beginDateScope,callback:function(t){e.$set(e.advSearchData,"beginDateScope",t)},expression:"advSearchData.beginDateScope"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:5,offset:2}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchPrj}},[e._v("搜索")])],1)],1)],1)],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.prjs,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),n("el-table-column",{attrs:{prop:"customName",align:"left",fixed:"",label:"客户名称",width:"90"}}),e._v(" "),n("el-table-column",{attrs:{prop:"contractNo",width:"85",align:"left",label:"合同编号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{prop:"projectNo",label:"项目编号",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"签订日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"incomeYear",width:"100",label:"确认收入年份"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"开工日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"department.name",align:"left",width:"100",label:"所属部门"}}),e._v(" "),n("el-table-column",{attrs:{prop:"amount",width:"80",align:"left",label:"合同金额"}}),e._v(" "),n("el-table-column",{attrs:{prop:"totalPeopleMonth",width:"80",align:"left",label:"人月总数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"budgetPeopleMonth",width:"80",align:"left",label:"预算人月总数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"costAmount",width:"80",align:"left",label:"成本合计"}}),e._v(" "),n("el-table-column",{attrs:{prop:"labourAmount",width:"80",align:"left",label:"人工成本"}}),e._v(" "),n("el-table-column",{attrs:{prop:"expenseAmount",width:"80",align:"left",label:"费用成本"}}),e._v(" "),n("el-table-column",{attrs:{prop:"labourBudget",width:"80",align:"left",label:"人工预算"}}),e._v(" "),n("el-table-column",{attrs:{prop:"expenseBudget",width:"80",align:"left",label:"费用预算"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(n){e.showEditPrjView(t.row)}}},[e._v("编辑\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"}},[e._v("项目预算\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(n){e.deletePrj(t.row)}}},[e._v("删除\n                ")])]}}])})],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.prjs.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyPrjs}},[e._v("批量删除\n            ")]):e._e(),e._v(" "),n("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),n("el-form",{ref:"addPrjForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.prj,rules:e.rules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"项目名称:",prop:"name"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{size:"mini",placeholder:"请输入项目名称"},model:{value:e.prj.name,callback:function(t){e.$set(e.prj,"name",t)},expression:"prj.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目编号:",prop:"projectNo"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请输入项目编号"},model:{value:e.prj.projectNo,callback:function(t){e.$set(e.prj,"projectNo",t)},expression:"prj.projectNo"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"所属客户:",prop:"customId"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择所属客户"},model:{value:e.prj.customId,callback:function(t){e.$set(e.prj,"customId",t)},expression:"prj.customId"}},e._l(e.customs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"项目类型:"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择项目类型"},model:{value:e.prj.prjTypeId,callback:function(t){e.$set(e.prj,"prjTypeId",t)},expression:"prj.prjTypeId"}},e._l(e.prjTypes,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{label:"项目分类:",prop:"prjClassId"}},[n("el-radio-group",{model:{value:e.prj.prjClassId,callback:function(t){e.$set(e.prj,"prjClassId",t)},expression:"prj.prjClassId"}},[n("el-radio",{attrs:{label:"延续形"}},[e._v("延续形")]),e._v(" "),n("el-radio",{attrs:{label:"新项目"}},[e._v("新项目")])],1)],1)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属部门:",prop:"departmentName"}},[n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),n("div",{staticStyle:{width:"230px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[e._v(e._s(e.prj.departmentName)+"\n                    ")])],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"启动日期:",prop:"beginDate"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"启动日期"},model:{value:e.prj.beginDate,callback:function(t){e.$set(e.prj,"beginDate",t)},expression:"prj.beginDate"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.prj.endDate,callback:function(t){e.$set(e.prj,"endDate",t)},expression:"prj.endDate"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addPrj("addPrjForm")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("qihR")},null,null);t.default=o.exports},"LTO/":function(e,t){},MObZ:function(e,t){e.exports="data:image/jpeg;base64,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"},N7pn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={mounted:function(){},methods:{loadData:function(e){var t=this;this.loading=!0,this.getRequest("/budget/prjBudgets/"+e).then(function(e){e&&200==e.status&&(t.initData(e.data),t.prjBudgets=e.data)})},formatAmount1:function(e){console.log(e.index),console.log(e.row),console.log(e.column)},formatAmount:function(e,t,n){for(var i=t.property.split("."),a=e,o=0;o<i.length;o++)a=a[i[o]];return this.formatMoney(a,1)},initData:function(e){this.loading=!1;for(var t=0,n=0,i=0;i<e.length;i++){this.$set(e[i],"amountSum",0),this.$set(e[i],"manMonthSum",0),this.$set(e[i],"editFlag",!1),this.$set(e[i],"changed",!1),t=0,n=0;for(var a=0,o=e[i].prjManCostAvg,s=0;s<12;s++)this.$set(e[i].amounts[s],"editFlag",!1),a=e[i].amounts[s].manMonth*o,e[i].amounts[s].amount=a,t+=a,n+=e[i].amounts[s].manMonth;e[i].amountSum=t,e[i].manMonthSum=n}},cellClicked:function(e,t,n){this.currentItemLabel=e.name,this.editingRow=e,this.editingProp=t.property.split(".");for(var i=e,a=0;a<this.editingProp.length;a++)i=i[this.editingProp[a]];this.amount=i,this.dialogVisible=!0},handleEdit:function(e,t){-1==t?(e.editFlag=!0,this.inputColumn1=e.prjManCostAvg):(e.amounts[t].editFlag=!0,this.inputColumn1=e.amounts[t].manMonth)},handleSave:function(e,t){if(-1==t){e.editFlag=!1,e.prjManCostAvg=parseFloat(this.inputColumn1);for(var n=0;n<12;n++)e.amounts[n].amount=parseFloat(e.amounts[n].manMonth*e.prjManCostAvg);e.amountSum=parseFloat(e.manMonthSum*e.prjManCostAvg)}else{e.amounts[t].editFlag=!1;var i,a,o,s;i=parseFloat(e.manMonthSum),a=parseFloat(this.inputColumn1),o=parseFloat(e.amounts[t].manMonth),s=parseFloat(e.prjManCostAvg),console.log(i),console.log(a),console.log(o);var l=i-o+a;console.log(l),e.manMonthSum=l,e.amountSum=l*s,console.log(e.manMonthSum),console.log(e.amountSum),e.amounts[t].manMonth=a,e.amounts[t].amount=a*s}e.changed=!0},handleCancel:function(e,t){-1==t?e.editFlag=!1:e.amounts[t].editFlag=!1},handleMouseEnter:function(e,t,n,i){var a=t.property;"prjManCostAvg"==a?e.editFlag||(n.children[0].children[0].children[1].style.color="black"):a>=1&&a<=12&&(e.amounts[a-1].editFlag||(n.children[0].children[1].style.color="black"))},handleMouseOut:function(e,t,n,i){var a=t.property;"prjManCostAvg"==a?e.editFlag||(n.children[0].children[0].children[1].style.color="#ffffff"):a>=1&&a<=12&&(e.amounts[a-1].editFlag||(n.children[0].children[1].style.color="#ffffff"))}},updatePrjBudget:function(e){var t=this;this.tableLoading=!0,this.postRequest("budget/depbudgets/prjBudgets",e).then(function(n){if(t.tableLoading=!1,n&&200==n.status){var i=n.data;t.$message({type:i.status,message:i.msg}),e.changed=!1}})},data:function(){return{loading:!1,prjBudgets:[],tableLoading:!1,dialogVisible:!1,currentItemLabel:"",amount:0,editingRow:null,editingProp:"",tableTitles:[{title:"一月",idx:"1"},{title:"二月",idx:"2"},{title:"三月",idx:"3"},{title:"四月",idx:"4"},{title:"五月",idx:"5"},{title:"六月",idx:"6"},{title:"七月",idx:"7"},{title:"八月",idx:"8"},{title:"九月",idx:"9"},{title:"十月",idx:"10"},{title:"十一月",idx:"11"},{title:"十二月",idx:"12"}]}},props:["depId"]},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.prjBudgets,border:"",stripe:"",size:"mini"},on:{"cell-mouse-enter":e.handleMouseEnter,"cell-mouse-leave":e.handleMouseOut}},[n("el-table-column",{attrs:{prop:"prjNo",align:"left",fixed:"",label:"项目编号",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"prjName",fixed:"",width:"150",align:"left",label:"项目名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"prjManCostAvg",width:"100",align:"right",label:"平均人月费用"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editFlag?n("span",[n("span",{staticClass:"cell-edit-input"},[n("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},nativeOn:{keyup:[function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.handleSave(t.row,-1)},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27,n.key,"Escape"))return null;e.handleCancel(t.row,-1)}]},model:{value:e.inputColumn1,callback:function(t){e.inputColumn1=t},expression:"inputColumn1"}})],1),e._v(" "),n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"black"},on:{click:function(n){e.handleSave(t.row,-1)}}},[n("i",{staticClass:"el-icon-check"})]),e._v(" "),n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"black"},on:{click:function(n){e.handleCancel(t.row,-1)}}},[n("i",{staticClass:"el-icon-close"})])]):n("span",{staticStyle:{align:"right"}},[n("span",[e._v(e._s(e.formatMoney(t.row.prjManCostAvg,1)))]),e._v(" "),n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"#ffffff"},on:{click:function(n){e.handleEdit(t.row,-1)}}},[n("i",{staticClass:"el-icon-edit"})])])]}}])}),e._v(" "),e._l(e.tableTitles,function(t,i){return n("el-table-column",{key:i,attrs:{label:e.tableTitles[i].title,prop:e.tableTitles[i].idx,width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.amounts[i].editFlag?e._e():n("span",[e._v(e._s(t.row.amounts[i].manMonth)+"人月"),n("br"),e._v(e._s(e.formatMoney(t.row.amounts[i].amount,1))+"元 ")]),e._v(" "),t.row.amounts[i].editFlag?e._e():n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"#ffffff"},on:{click:function(n){e.handleEdit(t.row,i)}}},[n("i",{staticClass:"el-icon-edit"})]),e._v(" "),t.row.amounts[i].editFlag?n("span",{staticClass:"cell-edit-input"},[n("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},nativeOn:{keyup:[function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.handleSave(t.row,i)},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27,n.key,"Escape"))return null;e.handleCancel(t.row,i)}]},model:{value:e.inputColumn1,callback:function(t){e.inputColumn1=t},expression:"inputColumn1"}})],1):e._e(),e._v(" "),t.row.amounts[i].editFlag?n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"black"},on:{click:function(n){e.handleSave(t.row,i)}}},[n("i",{staticClass:"el-icon-check"})]):e._e(),e._v(" "),t.row.amounts[i].editFlag?n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"black"},on:{click:function(n){e.handleCancel(t.row,i)}}},[n("i",{staticClass:"el-icon-close"})]):e._e()]}}])})}),e._v(" "),n("el-table-column",{attrs:{label:"附加费用",prop:"sum",formatter:e.formatAmount,align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatMoney(t.row.amountSum,1))+"元\n              ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"总计",prop:"sum",formatter:e.formatAmount,align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.manMonthSum)+"人月"),n("br"),e._v("\n                "+e._s(e.formatMoney(t.row.amountSum,1))+"元\n              ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.changed,expression:"scope.row.changed"}],attrs:{type:"danger",size:"mini"},on:{click:function(n){e.updatePrjBudget(t.row)}}},[e._v("提交修改\n                ")])]}}])})],2)],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("wEda")},null,null);t.default=o.exports},NC9U:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("N7pn"),a=n("no6E"),o=n("k6ib"),s={mounted:function(){this.loadMyDeps(),this.initData()},methods:{loadMyDeps:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/myDeps").then(function(t){e.loading=!1,t&&200==t.status&&(e.myDeps=t.data)})},initData:function(){var e=this;this.loading=!0,this.getRequest("/system/budget/settings").then(function(t){e.loading=!1,t&&200==t.status&&(e.bePrjBudget=t.data.bePrjBudget,e.beCommonBudget=t.data.beCommonBudget,e.bePrjBudget?e.activeTab="prjBudget":e.activeTab=""+t.data.budgetTypes[0].id,e.budgetTypes=t.data.budgetTypes)})},changeDep:function(e){console.log(this.depId),console.log(this.$refs.cost),this.$refs.prjBudget.loadData(e),this.$refs.comm.loadData(e);for(var t=0;t<this.$refs.cost.length;t++)this.$refs.cost[t].loadData(e)}},components:{"project-budget":i.default,"expense-budget":a.default,"common-budget":o.default},data:function(){return{myDeps:[],depId:"",loading:!1,budgetTypes:[],budgetType:{id:-1,name:"",desc:""},activeTab:"prjBudget",bePrjBudget:!1,beCommonBudget:!1}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{padding:"10px"}},[n("label",[e._v("请选择部门：")]),e._v(" "),n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择部门"},on:{change:e.changeDep},model:{value:e.depId,callback:function(t){e.depId=t},expression:"depId"}},e._l(e.myDeps,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"项目预算",name:"prjBudget"}},[n("project-budget",{ref:"prjBudget",attrs:{dep_id:e.depId}})],1),e._v(" "),e._l(e.budgetTypes,function(t){return n("el-tab-pane",{key:t.id,attrs:{label:t.name,name:t.id.toString()}},[n("expense-budget",{ref:"cost",refInFor:!0,attrs:{budget_type_id:t.id,budgetTypeId:t.id,editable:!0,dep_id:e.depId}})],1)}),e._v(" "),e.beCommonBudget?n("el-tab-pane",{attrs:{label:"公共预算",name:"comBudget"}},[n("common-budget",{ref:"comm",attrs:{dep_id:e.depId}})],1):e._e()],2)],1)},staticRenderFns:[]},r=n("VU/8")(s,l,!1,null,null,null);t.default=r.exports},NQUc:function(e,t){},O4gh:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAACgCAMAAACsXRuGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM0NzRDODMyQUFBQjExRTM4RTBEOTM2NTk4NDdFOUY0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM0NzRDODMzQUFBQjExRTM4RTBEOTM2NTk4NDdFOUY0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzQ3NEM4MzBBQUFCMTFFMzhFMEQ5MzY1OTg0N0U5RjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzQ3NEM4MzFBQUFCMTFFMzhFMEQ5MzY1OTg0N0U5RjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6HaigFAAAACVBMVEX///+cnJz////3K816AAAAA3RSTlP//wDXyg1BAAAA30lEQVR42uzYywqFMAxF0dT//2hxUBBjk4PV+toFHQiuQU96Ta5NJy8DBOwEy3a1XtquYeB7QikdL+89a2+e20oJjOJw0QhgHLCLOgWzknGlk4B5EbpSDEGlrF1pB6B2UNxRGbqHgL8A+YwCAgICAl4xVoitTbO3KeJYYepY8VNwudcrApd7vcaCpPww8PSzvELFWVQZb/uG2wYoTt82ieDxcX4fFH+ZjY8UICAgIODLxwrpb12rjWbWijwfJBRCIZRvhAIICAgICAhIs0SzRCiEQiiAgICAgID3gbMAAwA4Glxgl5i9TgAAAABJRU5ErkJggg=="},OiWE:function(e,t){},PJ0O:function(e,t,n){"use strict";var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("职称管理")])])}]};t.a=i},TP9z:function(e,t){},"UK/j":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("\n    备份恢复数据库\n  ")])])}]},a=n("VU/8")(null,i,!1,null,null,null);t.default=a.exports},Ugm9:function(e,t){},Vb3X:function(e,t){},XSWk:function(e,t){},Y9Jp:function(e,t){},ZDkW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("\n    操作日志管理\n  ")])])}]},a=n("VU/8")(null,i,!1,null,null,null);t.default=a.exports},agXO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("\n    初始化数据库\n  ")])])}]},a=n("VU/8")(null,i,!1,null,null,null);t.default=a.exports},agwU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={mounted:function(){},methods:{loadData:function(e){var t=this;this.loading=!0,this.getRequest("/budget/budgetTable/"+e).then(function(e){e&&200==e.status&&(t.budgetTable=e.data)})},formatAmount1:function(e){console.log(e.index),console.log(e.row),console.log(e.column)},formatAmount:function(e,t,n){for(var i=t.property.split("."),a=e,o=0;o<i.length;o++)a=a[i[o]];return this.formatMoney(a,1)}},data:function(){return{loading:!1,budgetTable:[],tableLoading:!1,currentItemLabel:"",amount:0,editingProp:"",tableTitles:[{title:"一月",idx:"1"},{title:"二月",idx:"2"},{title:"三月",idx:"3"},{title:"四月",idx:"4"},{title:"五月",idx:"5"},{title:"六月",idx:"6"},{title:"七月",idx:"7"},{title:"八月",idx:"8"},{title:"九月",idx:"9"},{title:"十月",idx:"10"},{title:"十一月",idx:"11"},{title:"十二月",idx:"12"}]}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.budgetTable,border:"",stripe:"",size:"mini"}},[n("el-table-column",{attrs:{prop:"label",fixed:"",width:"85",align:"left",label:""}}),e._v(" "),e._l(e.tableTitles,function(t,i){return n("el-table-column",{key:i,attrs:{label:e.tableTitles[i].title,prop:e.tableTitles[i].idx,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.formatMoney(t.row.amounts[i].amount,1)))])]}}])})}),e._v(" "),n("el-table-column",{attrs:{label:"总计",align:"right",width:"120"}})],2)],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("ul1/")},null,null);t.default=o.exports},bOdI:function(e,t,n){"use strict";t.__esModule=!0;var i,a=n("C4MV"),o=(i=a)&&i.__esModule?i:{default:i};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},byf9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={props:["user","isMenuShow"],methods:{toggleMenu:function(){isMenuShow=!isMenuShow,alert(isMenuShow)}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-header"},[n("span",{staticClass:"menuButton",attrs:{hidefocus:"true"}},[n("a",{staticClass:"returnList",attrs:{title:"菜单"},on:{click:e.toggleMenu}})]),e._v(" "),n("span",{staticClass:"home_title"},[e._v("微人事")]),e._v(" "),n("div",{staticStyle:{display:"flex","align-items":"center","margin-right":"7px"}},[n("el-badge",{staticStyle:{"margin-right":"30px"},attrs:{"is-dot":this.$store.state.nfDot}},[n("i",{staticClass:"fa fa-bell-o",staticStyle:{cursor:"pointer"},on:{click:e.goChat}})]),e._v(" "),n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link home_userinfo",staticStyle:{display:"flex","align-items":"center"}},[e._v("\r\n    "+e._s(e.user.name)+"\r\n    "),n("i",[""!=e.user.userface?n("img",{staticStyle:{width:"40px",height:"40px","margin-right":"5px","margin-left":"5px","border-radius":"40px"},attrs:{src:e.user.userface}}):e._e()])]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[e._v("个人中心")]),e._v(" "),n("el-dropdown-item",[e._v("设置")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("注销")])],1)],1)],1)])},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("Vb3X")},null,null);t.default=o.exports},c98W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("XSWk"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);var s=n("PJ0O"),l=n("VU/8")(a.a,s.a,!1,null,null,null);t.default=l.exports},cPUQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("bOdI"),a=n.n(i),o={data:function(){return{keywords:"",depName:"",treeLoading:!1,dialogVisible:!1,faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",allDeps:[],pDep:"",treeData:[],showOrHidePop:!1,addCustomViewVisible:!1,customName:"",pDepName:"",pDepId:-1,depTextColor:"#c0c4cc",defaultProps:{label:"name",isLeaf:"leaf",children:"children"}}},mounted:function(){this.treeLoading=!0,this.loadTreeData()},watch:{keywords:function(e){this.$refs.tree.filter(e)}},methods:{showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.pDepName=e.name,this.pDepId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},showAddCustomView:function(){this.pDepId=-1,this.customName="",this.addCustomViewVisible=!this.addCustomViewVisible},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},loadTreeData:function(){var e=this;this.getRequest("/custom/customs/-1").then(function(t){e.treeLoading=!1,t&&200==t.status&&(e.treeData=t.data)})},setDataToTree:function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(a.id==t)return void(e[i].children=e[i].children.concat(n));this.setDataToTree(a.children,t,n)}},addNewCustom:function(){var e=this;""!=this.customName?(this.treeLoading=!0,this.postRequest("/system/basic/custom",{name:this.customName,parentId:-1}).then(function(t){if(e.treeLoading=!1,t&&200==t.status){var n=t.data;e.$message({type:n.status,message:"添加成功!"}),e.setDataToTree(e.treeData,e.pDepId,n.msg),e.customName="",e.pDepId=-1}})):e.$message({message:"请输入客户名称！"})},addDep:function(){var e=this;this.dialogVisible=!1,this.treeLoading=!0,this.postRequest("/system/basic/dep",{name:this.depName,parentId:this.pDep}).then(function(t){if(e.treeLoading=!1,t&&200==t.status){var n=t.data;e.depName="",e.$message({type:n.status,message:"添加成功!"}),e.setDataToTree(e.treeData,e.pDep,n.msg)}})},loadAllDeps:function(){var e=this;this.getRequest("/system/basic/deps").then(function(t){t&&200==t.status&&(e.allDeps=t.data)})},showAddDepView:function(e,t){this.dialogVisible=!0,this.pDepId=e.id,this.pDepName=e.name,t.stopPropagation()},deleteDep:function(e,t){var n=this;e.children.length>0?this.$message({message:"该部门下尚有其他部门，不能被删除!",type:"warning"}):this.$confirm("删除["+e.name+"]部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.treeLoading=!0,n.deleteRequest("/system/basic/dep/"+e.id).then(function(t){if(n.treeLoading=!1,t&&200==t.status){var i=t.data;n.$message({message:i.msg,type:i.status}),n.deleteLocalDep(n.treeData,e)}})}).catch(function(){n.$message({type:"info",message:"已取消删除"})}),t.stopPropagation()},deleteLocalDep:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id==t.id)return void e.splice(n,1);this.deleteLocalDep(i.children,t)}},renderContent:function(e,t){var n,i,o=this,s=t.node,l=t.data;t.store;return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",[e("span",[s.label])]),e("span",[e("span",{style:"margin-right:20px;"},["维护部门：",l.departmentId," "]),e("el-button",(n={style:"font-size: 12px;",attrs:{type:"primary",size:"mini"}},a()(n,"style","padding:3px"),a()(n,"on",{click:function(){return o.showAddDepView(l,event)}}),n),["添加部门"]),e("el-button",(i={style:"font-size: 12px;",attrs:{type:"danger",size:"mini"}},a()(i,"style","padding:3px"),a()(i,"on",{click:function(){return o.deleteDep(l,event)}}),i),["删除部门"])])])}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"30px"}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"添加客户...",size:"mini","prefix-icon":"el-icon-plus"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addNewCustom(t):null}},model:{value:e.customName,callback:function(t){e.customName=t},expression:"customName"}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addNewCustom}},[e._v("添加")])],1),e._v(" "),n("div",{staticStyle:{"max-width":"800px"}},[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",staticStyle:{"margin-top":"10px"},attrs:{props:e.defaultProps,data:e.treeData,"filter-node-method":e.filterNode,"render-content":e.renderContent}}),e._v(" "),n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{attrs:{title:"添加客户部门",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("span",[e._v("上级部门：")]),e._v(" "),n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[n("el-tree",{attrs:{data:e.treeData,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),n("div",{staticStyle:{width:"150px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:e.showDepTree(t):null}},slot:"reference"},[e._v(e._s(e.pDepName)+"\n                  ")])],1)],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("span",[e._v("部门名称：")]),e._v(" "),n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入部门名称..."},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addDep(t):null}},model:{value:e.depName,callback:function(t){e.depName=t},expression:"depName"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addDep}},[e._v("添加")])],1)])],1)],1)])},staticRenderFns:[]},l=n("VU/8")(o,s,!1,null,null,null);t.default=l.exports},eLaH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("oAV5"),a={mounted:function(){this.loading=!0,this.initRoles()},methods:{deleteRole:function(e,t){var n=this;this.$confirm("删除角色["+t+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.loading=!0,n.deleteRequest("/system/basic/role/"+e).then(function(e){if(e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.initRoles()}else n.loading=!1})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},addNewRole:function(){if(Object(i.isNotNullORBlank)(this.newRole,this.newRoleZh)){this.loading=!0;var e=this;this.postRequest("/system/basic/addRole",{role:this.newRole,roleZh:this.newRoleZh}).then(function(t){if(t&&200==t.status){var n=t.data;e.$message({type:n.status,message:n.msg}),e.initRoles(),e.newRole="",e.newRoleZh=""}else e.loading=!1})}},updateRoleMenu:function(e){var t=this.$refs.tree[e].getCheckedKeys(!0),n=this;this.putRequest("/system/basic/updateMenuRole",{rid:this.activeColItem,mids:t}).then(function(e){if(e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.activeColItem=-1}})},collapseChange:function(e){if(""!=e){var t=this;this.getRequest("/system/basic/menuTree/"+e).then(function(e){if(e&&200==e.status){var n=e.data;t.treeData=n.menus,t.checkedKeys=n.mids}})}},handleCheckChange:function(e,t,n){},initRoles:function(){var e=this;this.getRequest("/system/basic/roles").then(function(t){e.loading=!1,t&&200==t.status&&(e.roles=t.data,e.activeColItem=-1)})},cancelUpdateRoleMenu:function(){this.activeColItem=-1}},data:function(){return{props:{label:"name",children:"childs"},newRole:"",newRoleZh:"",roles:[],treeData:[],checkedKeys:[],loading:!1,activeColItem:-1}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"left"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入角色英文名称...",size:"mini"},model:{value:e.newRole,callback:function(t){e.newRole=t},expression:"newRole"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),e._v(" "),n("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入角色中文名称...",size:"mini"},model:{value:e.newRoleZh,callback:function(t){e.newRoleZh=t},expression:"newRoleZh"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addNewRole}},[e._v("添加角色")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[n("el-collapse",{staticStyle:{width:"500px"},attrs:{accordion:""},on:{change:e.collapseChange},model:{value:e.activeColItem,callback:function(t){e.activeColItem=t},expression:"activeColItem"}},e._l(e.roles,function(t,i){return n("el-collapse-item",{key:t.name,attrs:{title:t.nameZh,name:t.id}},[n("el-card",{staticClass:"box-card"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("可访问的资源")]),e._v(" "),n("el-button",{staticStyle:{color:"#f6061b",margin:"0px",float:"right",padding:"3px 0",width:"15px",height:"15px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){e.deleteRole(t.id,t.nameZh)}}})],1),e._v(" "),n("div",[n("el-tree",{key:t.id,ref:"tree",refInFor:!0,attrs:{props:e.props,data:e.treeData,"default-checked-keys":e.checkedKeys,"node-key":"id","show-checkbox":"","highlight-current":""},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"10px"}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelUpdateRoleMenu}},[e._v("取消修改")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.updateRoleMenu(i)}}},[e._v("确认修改")])],1)])],1)}))],1)])},staticRenderFns:[]},s=n("VU/8")(a,o,!1,null,null,null);t.default=s.exports},ewEk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{keywords:"",fullloading:!1,hrs:[],cardLoading:[],eploading:[],allRoles:[],moreBtnState:!1,selRoles:[],selRolesBak:[]}},mounted:function(){this.initCards(),this.loadAllRoles()},methods:{searchClick:function(){this.initCards(),this.loadAllRoles()},updateHrRoles:function(e,t){this.moreBtnState=!1;var n=this;if(this.selRolesBak.length==this.selRoles.length){for(var i=0;i<this.selRoles.length;i++)for(var a=0;a<this.selRolesBak.length;a++)if(this.selRoles[i]==this.selRolesBak[a]){this.selRolesBak.splice(a,1);break}if(0==this.selRolesBak.length)return}this.eploading.splice(t,1,!0),this.putRequest("/system/hr/roles",{hrId:e,rids:this.selRoles}).then(function(i){if(n.eploading.splice(t,1,!1),i&&200==i.status){var a=i.data;n.$message({type:a.status,message:a.msg}),"success"==a.status&&n.refreshHr(e,t)}})},refreshHr:function(e,t){var n=this;n.cardLoading.splice(t,1,!0),this.putRequest("/system/hr/id/"+e).then(function(e){n.cardLoading.splice(t,1,!1),n.hrs.splice(t,1,e.data)})},loadSelRoles:function(e,t){var n=this;this.moreBtnState=!0,this.selRoles=[],this.selRolesBak=[],e.forEach(function(e){n.selRoles.push(e.id),n.selRolesBak.push(e.id)})},loadAllRoles:function(){var e=this;this.getRequest("/system/basic/roles").then(function(t){e.fullloading=!1,t&&200==t.status&&(e.allRoles=t.data)})},switchChange:function(e,t,n){var i=this;i.cardLoading.splice(n,1,!0),this.putRequest("/system/hr/",{enabled:e,id:t}).then(function(e){if(i.cardLoading.splice(n,1,!1),e&&200==e.status){var a=e.data;i.$message({type:a.status,message:a.msg}),"error"==a.status&&i.refreshHr(t,n)}else i.refreshHr(t,n)})},initCards:function(){this.fullloading=!0;var e,t=this;e=""===this.keywords?"all":this.keywords,this.getRequest("/system/hr/"+e).then(function(e){if(e&&200==e.status){t.hrs=e.data;var n=e.data.length;t.cardLoading=Array.apply(null,Array(n)).map(function(e,t){return!1}),t.eploading=Array.apply(null,Array(n)).map(function(e,t){return!1})}})},deleteHr:function(e){var t=this;this.fullloading=!0,this.deleteRequest("/system/hr/"+e).then(function(e){if(t.fullloading=!1,e&&200==e.status){var n=e.data;t.$message({type:n.status,message:n.msg}),"success"==n.status&&(t.initCards(),t.loadAllRoles())}})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fullloading,expression:"fullloading"}],staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"center","align-items":"center"}},[n("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"默认展示部分用户，可以通过用户名搜索更多用户...","prefix-icon":"el-icon-search",size:"small"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("搜索")])],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-around","flex-wrap":"wrap","text-align":"left"}},e._l(e.hrs,function(t,i){return n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.cardLoading[i],expression:"cardLoading[index]"}],key:t.id,staticStyle:{width:"350px","margin-bottom":"20px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.name))]),e._v(" "),n("el-button",{staticStyle:{color:"#f6061b",margin:"0px",float:"right",padding:"3px 0",width:"15px",height:"15px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){e.deleteHr(t.id)}}})],1),e._v(" "),n("div",[n("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[n("img",{staticStyle:{width:"70px",height:"70px","border-radius":"70px"},attrs:{src:t.userface,alt:"item.name"}})]),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("div",[n("span",{staticClass:"user-info"},[e._v("用户名:"+e._s(t.name))])]),e._v(" "),n("div",[n("span",{staticClass:"user-info"},[e._v("手机号码:"+e._s(t.phone))])]),e._v(" "),n("div",[n("span",{staticClass:"user-info"},[e._v("电话号码:"+e._s(t.telephone))])]),e._v(" "),n("div",[n("span",{staticClass:"user-info"},[e._v("地址:"+e._s(t.address))])]),e._v(" "),n("div",{staticClass:"user-info",staticStyle:{display:"flex","align-items":"center","margin-bottom":"3px"}},[e._v("\n              用户状态:\n              "),n("el-switch",{key:t.id,staticStyle:{display:"inline","margin-left":"5px"},attrs:{"active-color":"#13ce66","inactive-color":"#aaaaaa","active-text":"启用","inactive-text":"禁用"},on:{change:function(n){e.switchChange(t.enabled,t.id,i)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"item.enabled"}})],1),e._v(" "),n("div",{staticClass:"user-info"},[e._v("\n              用户角色:\n              "),e._l(t.roles,function(t){return n("el-tag",{key:t.id,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"mini","disable-transitions":!1}},[e._v(e._s(t.nameZh)+"\n              ")])}),e._v(" "),n("el-popover",{directives:[{name:"loading",rawName:"v-loading",value:e.eploading[i],expression:"eploading[index]"}],key:t.id,attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{hide:function(n){e.updateHrRoles(t.id,i)}}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:e.selRoles,callback:function(t){e.selRoles=t},expression:"selRoles"}},e._l(e.allRoles,function(e){return n("el-option",{key:e.id,attrs:{label:e.nameZh,value:e.id}})})),e._v(" "),n("el-button",{staticStyle:{color:"#09c0f6","padding-top":"0px"},attrs:{slot:"reference",type:"text",icon:"el-icon-more",disabled:e.moreBtnState},on:{click:function(n){e.loadSelRoles(t.roles,i)}},slot:"reference"})],1)],2),e._v(" "),n("div",[n("span",{staticClass:"user-info"},[e._v("备注:"+e._s(t.remark))])])])])])}))])},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("NQUc")},null,null);t.default=o.exports},fc7a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("eLaH"),a=n("FvOz"),o=n("5xQo"),s=n("c98W"),l=n("/LNZ"),r={data:function(){return{defaultTab:"depMana"}},methods:{},components:{"menu-role":i.default,"dep-mana":a.default,"ec-mana":o.default,"jobtitle-mana":s.default,"pos-mana":l.default}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tabs",{attrs:{type:"card"},model:{value:e.defaultTab,callback:function(t){e.defaultTab=t},expression:"defaultTab"}},[n("el-tab-pane",{attrs:{label:"部门管理",name:"depMana"}},[n("dep-mana")],1),e._v(" "),n("el-tab-pane",{attrs:{label:"权限组",name:"menuRole"}},[n("menu-role")],1)],1)],1)},staticRenderFns:[]},d=n("VU/8")(r,c,!1,null,null,null);t.default=d.exports},gORT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg))]),e._v(" "),n("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),n("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),n("br"),e._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var a=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},i,!1,function(e){n("Ugm9")},"data-v-694cd902",null);t.default=a.exports},k6ib:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"addCommBudgetForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.commonBudgetItem,rules:e.rules}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"费用项名称:",prop:"budgetName"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请输入新的费用项名称"},model:{value:e.commonBudgetItem.budgetName,callback:function(t){e.$set(e.commonBudgetItem,"budgetName",t)},expression:"commonBudgetItem.budgetName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"费用金额:",prop:"amount"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"金额"},model:{value:e.commonBudgetItem.amount,callback:function(t){e.$set(e.commonBudgetItem,"amount",t)},expression:"commonBudgetItem.amount"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{prop:"bgDate",label:"预计发生时间:"}},[n("el-date-picker",{staticStyle:{width:"130px"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"预计发生日期"},model:{value:e.commonBudgetItem.bgDate,callback:function(t){e.$set(e.commonBudgetItem,"bgDate",t)},expression:"commonBudgetItem.bgDate"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"备注:",prop:"desc"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"备注..."},model:{value:e.commonBudgetItem.desc,callback:function(t){e.$set(e.commonBudgetItem,"desc",t)},expression:"commonBudgetItem.desc"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[e.editing?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.cancelEditCommonItem()}}},[e._v("取 消")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addCommBudgetItem("addCommBudgetForm")}}},[e._v(e._s(e.buttonLabel))])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.commonBudges,border:"",stripe:"",size:"mini"}},[n("el-table-column",{attrs:{prop:"budgetName",align:"left",label:"预算费用名称",width:"160"}}),e._v(" "),n("el-table-column",{attrs:{prop:"bgDate",width:"100",align:"left",label:"预计发生时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.bgDate)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"amount",width:"90",align:"right",formatter:e.formatAmount,label:"金额"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",width:"200",label:"备注"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(n){e.editCommonBudget(t.row)}}},[e._v("编辑\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(n){e.deleteCommonBudget(t.row)}}},[e._v("删除\n                ")])]}}])})],1)],1)},staticRenderFns:[]};var a=n("VU/8")({mounted:function(){},methods:{loadData:function(e){var t=this;this.loading=!0,this.getRequest("/budget/commBudgets/"+e).then(function(e){e&&200==e.status&&(t.commonBudges=e.data)})},showAddCommBudgetView:function(){this.addViewVisible=!this.addViewVisible,this.addViewVisible||this.emptyBudgetItemData()},emptyBudgetItemData:function(){this.commonBudgetItem.id=-1,this.commonBudgetItem.budgetName="",this.commonBudgetItem.bgDate="",this.commonBudgetItem.amount=0,this.commonBudgetItem.desc=""},addCommBudgetItem:function(e){var t=this,n=this;this.$refs[e].validate(function(e){e&&(t.tableLoading=!0,t.postRequest("/system/budget/commBudgetItem",t.commonBudgetItem).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.emptyBudgetItemData(),n.loadData()}}))})},editCommonBudget:function(e){this.editing=!0,this.buttonLabel="提交修改",this.commonBudgetItem.id=e.id,this.commonBudgetItem.budgetName=e.budgetName,this.commonBudgetItem.amount=e.amount,this.commonBudgetItem.desc=e.desc,this.commonBudgetItem.bgDate=e.bgDate},cancelEditCommonItem:function(){this.editing=!1,this.buttonLabel="确定新增",this.emptyBudgetItemData()},formatAmount:function(e,t,n){for(var i=t.property.split("."),a=e,o=0;o<i.length;o++)a=a[i[o]];return this.formatMoney(a,1)}},data:function(){return{loading:!1,commonBudges:[],tableLoading:!1,addViewVisible:!1,faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",buttonLabel:"确定新增",editing:!1,commonBudgetItem:{id:-1,budgetName:"",amount:0,bgDate:"",desc:""},rules:{budgetName:[{required:!0,message:"名称不能为空",trigger:"blur"}],amount:[{required:!0,message:"必填:金额",trigger:"blur"}],bgDate:[{required:!0,message:"必填:发生日期",trigger:"blur"}]}}},props:["depId"]},i,!1,function(e){n("OiWE")},null,null);t.default=a.exports},n5Dk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("agwU"),a=n("no6E"),o={mounted:function(){this.loadMyDeps()},methods:{loadMyDeps:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/myDeps").then(function(t){e.loading=!1,t&&200==t.status&&(e.myDeps=t.data)})},changeDep:function(e){console.log(this.depId),console.log(this.$refs.cost),this.$refs.budgetTable.loadData(e),this.$refs.costCollect.loadData(e)}},components:{"dep-budget":i.default,"expense-budget":a.default},data:function(){return{loading:!1,myDeps:[],depId:"",activeTab:"prjBudget"}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{padding:"10px"}},[n("label",[e._v("请选择部门：")]),e._v(" "),n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择部门"},on:{change:e.changeDep},model:{value:e.depId,callback:function(t){e.depId=t},expression:"depId"}},e._l(e.myDeps,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"部门预算表",name:"prjBudget"}},[n("dep-budget",{ref:"budgetTable"})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"经营费用汇总",name:"costCollect"}},[n("expense-budget",{ref:"costCollect",attrs:{budgetTypeId:"-1",editable:!1}})],1)],1)],1)},staticRenderFns:[]},l=n("VU/8")(o,s,!1,null,null,null);t.default=l.exports},nD79:function(e,t){},nf7z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={methods:{toggleMenu:function(){isMenuShow=!isMenuShow,isMenuShow?showMenuClass="hideNav":showMenuClass="showNav"}},props:["routes","isMenuShow","showMenuClass"]},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"v-bind",rawName:"v-v-bind:class",value:[e.showMenuClass],expression:"[showMenuClass]",arg:"class"},{name:"show",rawName:"v-show",value:e.isMenuShow,expression:"isMenuShow"}],staticClass:"nav-content showNav",on:{mouseleave:e.toggleMenu}},[n("el-menu",{staticStyle:{background:"#ececec",width:"180px"},attrs:{"unique-opened":"",router:""}},[e._l(e.routes,function(t,i){return t.hidden?e._e():[n("el-submenu",{key:i,attrs:{index:i+""}},[n("template",{slot:"title"},[n("i",{class:t.iconCls,staticStyle:{color:"#20a0ff",width:"14px"}}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._v(" "),e._l(t.children,function(t){return n("el-menu-item",{key:t.path,staticStyle:{"padding-left":"30px","padding-right":"0px","margin-left":"0px",width:"170px","text-align":"left"},attrs:{width:"180px",index:t.path}},[e._v(e._s(t.name)+"\r\n                  ")])})],2)]})],2)],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("4B6g")},null,null);t.default=o.exports},no6E:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("utwD"),a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.expenseItems,border:"",stripe:"","show-summary":"","summary-method":e.getSummaries,size:"mini"},on:{"cell-mouse-enter":e.handleMouseEnter,"cell-mouse-leave":e.handleMouseOut}},[n("el-table-column",{attrs:{prop:"groupId",align:"left",fixed:"",label:"费用类别",formatter:e.formatExpenseGroup,width:"90"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",fixed:"",width:"85",align:"left",label:"费用名称"}}),e._v(" "),e._l(e.tableTitles,function(t,i){return n("el-table-column",{key:i,attrs:{label:e.tableTitles[i].title,prop:e.tableTitles[i].idx,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===e.editable?n("span",[t.row.amounts[i].editFlag?e._e():n("span",[e._v(e._s(e.formatMoney(t.row.amounts[i].amount,1)))]),e._v(" "),!t.row.amounts[i].editFlag&-1==t.row.refItem?n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px"},on:{click:function(n){e.handleEdit(t.row,i)}}},[n("i",{staticClass:"el-icon-edit"})]):e._e(),e._v(" "),t.row.amounts[i].editFlag&-1==t.row.refItem?n("span",{staticClass:"cell-edit-input"},[n("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},nativeOn:{keyup:[function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;e.handleSave(t.row,i)},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27,n.key,"Escape"))return null;e.handleCancel(t.row,i)}]},model:{value:e.inputColumn1,callback:function(t){e.inputColumn1=t},expression:"inputColumn1"}})],1):e._e(),e._v(" "),t.row.amounts[i].editFlag&-1==t.row.refItem?n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"black"},on:{click:function(n){e.handleSave(t.row,i)}}},[n("i",{staticClass:"el-icon-check"})]):e._e(),e._v(" "),t.row.amounts[i].editFlag&-1==t.row.refItem?n("span",{staticClass:"cell-icon",staticStyle:{"margin-left":"10px",color:"black"},on:{click:function(n){e.handleCancel(t.row,i)}}},[n("i",{staticClass:"el-icon-close"})]):e._e()]):n("span",[e._v("\n                    "+e._s(e.formatMoney(t.row.amounts[i].amount,1))+"\n                  ")])]}}])})}),e._v(" "),n("el-table-column",{attrs:{label:"总计",prop:"sum",formatter:e.formatAmount,align:"right",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"备注",width:"80"}}),e._v(" "),e.editable?n("el-table-column",{attrs:{label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(n){e.showEditPrjView(t.row)}}},[e._v("编辑\n                ")])]}}])}):e._e()],2),e._v(" "),n("div",{staticClass:"el-dialog__footer",staticStyle:{margin:"2px"}},[n("el-button",{attrs:{type:"danger",size:"mini",disabled:!e.changed},on:{click:e.commitChange}},[e._v("提交修改\n            ")])],1)],1)},staticRenderFns:[]};var o=function(e){n("nD79")},s=n("VU/8")(i.a,a,!1,o,null,null);t.default=s.exports},oDJ2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("y19v"),a=n("qGup"),o=n("GrqC"),s={data:function(){return{defaultTab:"budgetType"}},methods:{},components:{"budget-type":i.default,"cost-def":a.default,"cost-group":o.default}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tabs",{attrs:{type:"card"},model:{value:e.defaultTab,callback:function(t){e.defaultTab=t},expression:"defaultTab"}},[n("el-tab-pane",{attrs:{label:"费用预算类别",name:"budgetType"}},[n("budget-type")],1),e._v(" "),n("el-tab-pane",{attrs:{label:"费用分组",name:"costGroup"}},[n("cost-group")],1),e._v(" "),n("el-tab-pane",{attrs:{label:"费用预算定义",name:"costDef"}},[n("cost-def")],1)],1)],1)},staticRenderFns:[]},r=n("VU/8")(s,l,!1,null,null,null);t.default=r.exports},oVJh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"text-align":"left"}},[n("el-form-item",{attrs:{label:"name"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"name;",size:"mini","prefix-icon":"el-icon-plus"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addPosition(t):null}},model:{value:e.positionName,callback:function(t){e.positionName=t},expression:"positionName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"日期:",prop:"beginDate"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"启动日期"},model:{value:e.beginDate,callback:function(t){e.beginDate=t},expression:"beginDate"}})],1),e._v(" "),"cost"==e.type||"income"==e.type?n("el-form-item",{attrs:{label:"金额：",prop:"amount"}},[n("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"金额：",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addPosition(t):null}},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addPosition}},[e._v("添加")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{data:e.posData,size:"mini",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"80",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"position"==e.state?"收款项":"确权项",width:"180",align:"left"}}),e._v(" "),"jobtitle"==e.state?n("el-table-column",{attrs:{prop:"amount",label:e.label,width:"180",align:"right"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"日期",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createDate)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[e.posData.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n    ")]):e._e()],1),e._v(" "),n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{attrs:{title:"position"==e.state?"编辑职位名称":"编辑职称",visible:e.dialogVisible,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{attrs:{size:"mini",placeholder:"请输入新的职位名称..."},model:{value:e.updatePosName,callback:function(t){e.updatePosName=t},expression:"updatePosName"}}),e._v(" "),"jobtitle"==e.state?n("el-select",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini",placeholder:"职称等级"},model:{value:e.updateTitleLevel,callback:function(t){e.updateTitleLevel=t},expression:"updateTitleLevel"}},e._l(e.titleLevels,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})):e._e(),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.updatePosNameExec}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]},a=n("VU/8")({mounted:function(){this.loadTableData()},methods:{updatePosNameExec:function(){var e=this;if(this.isNotNullORBlank(this.updatePosName)){this.loading=!0;var t=this;this.putRequest("position"==this.state?"/system/basic/position":"/system/basic/joblevel",{name:this.updatePosName,id:this.updatePosId,titleLevel:this.updateTitleLevel}).then(function(n){if(t.loading=!1,n&&200==n.status){e.dialogVisible=!1;var i=n.data;t.$message({type:i.status,message:i.msg}),t.loadTableData()}})}else this.$message.warning("position"==this.state?"职位名称不能为空!":"职称名称不能为空!")},deleteMany:function(){var e=this,t=this;this.$confirm("删除"+this.multipleSelection.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t){e=e+t.id+","}),t.doDelete(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addPosition:function(){if(this.isNotNullORBlank(this.positionName))if("jobtitle"!=this.state||this.isNotNullORBlank(this.titleLevel)){var e=this;this.loading=!0,this.postRequest("position"==this.state?"/system/basic/position":"/system/basic/joblevel",{name:this.positionName,titleLevel:this.titleLevel}).then(function(t){if(e.loading=!1,t&&200==t.status){var n=t.data;e.$message({type:n.status,message:n.msg}),e.loadTableData(),e.positionName="",e.titleLevel=""}})}else this.$message.warning("请选择职称级别!");else this.$message.warning("position"==this.state?"职位名称不能为空!":"职称名称不能为空!")},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){this.updatePosName=t.name,this.updatePosId=t.id,this.updateTitleLevel=t.titleLevel,this.dialogVisible=!0},handleDelete:function(e,t){var n=this,i=this;this.$confirm("删除["+t.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(t.id)}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},doDelete:function(e){var t=this;t.loading=!0;var n="position"==this.state?"/system/basic/position/":"/system/basic/joblevel/";this.deleteRequest(n+e).then(function(e){t.loading=!1,e&&200==e.status&&t.loadTableData()})},loadTableData:function(){var e=this;this.loading=!0,this.getRequest("position"==this.state?"/system/basic/positions":"/system/basic/joblevels").then(function(t){e.loading=!1,t&&200==t.status&&(e.posData=t.data)})}},data:function(){return{positionName:"",updatePosName:"",updateTitleLevel:"",titleLevel:"",updatePosId:-1,loading:!1,dialogVisible:!1,multipleSelection:[],type:[],titleLevels:["正高级","副高级","中级","初级","员级"],nameLabelName:"position"==this.state?"职位名称":"职称名称",posData:[]}},props:["prjId","type","name"]},i,!1,null,null,null);t.default=a.exports},qGup:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={mounted:function(){this.loadTableData()},methods:{addCostItemDef:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.costItemDef.id?(t.tableLoading=!0,t.putRequest("/system/budget/costItem",t.costItemDef).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyCostDefItemData(),n.loadTableData()}})):(t.tableLoading=!0,t.postRequest("/system/budget/costItem",t.costItemDef).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyCostDefItemData(),n.loadTableData()}}))})},deleteMany:function(){var e=this,t=this;this.$confirm("删除"+this.multipleSelection.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t){e=e+t.id+","}),t.doDelete(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},formatCostGroup:function(e,t){for(var n=0;n<this.costGroups.length;n++)if(this.costGroups[n].id==e.groupId)return this.costGroups[n].name;return"unknow"},formatBeAmount:function(e,t){return 1==e.beAmount?"参与合计":"不参与合计"},handleSelectionChange:function(e){this.multipleSelection=e},showAddCostItemDefView:function(){this.dialogTitle="添加费用定义信息",this.emptyCostDefItemData(),this.dialogVisible=!0},handleEdit:function(e,t){console.log(t),this.dialogTitle="编辑费用定义信息",this.costItemDef=t,this.dialogVisible=!0},handleDelete:function(e,t){var n=this,i=this;this.$confirm("删除["+t.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(t.id)}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},doDelete:function(e){var t=this;t.loading=!0;this.deleteRequest("/system/budget/costItem/"+e).then(function(e){t.loading=!1,e&&200==e.status&&t.loadTableData()})},loadTableData:function(){var e=this;this.loading=!0,this.getRequest("/system/budget/settings").then(function(t){e.loading=!1,t&&200==t.status&&(e.costItems=t.data.costItems,e.costGroups=t.data.costGroups,console.log(t.data),console.log(e.costItems))})},addFormulaVar:function(){null!=this.formulaItemId&&(null!=this.costItemDef.amountFormula?this.costItemDef.amountFormula+="#"+this.formulaItemId:this.costItemDef.amountFormula="#"+this.formulaItemId,this.formulaItemId=null)},emptyCostDefItemData:function(){this.costItemDef={id:"",name:"",groupId:"",beAmount:!1,amountFormula:"",desc:""},this.formulaItemId=null}},data:function(){return{itemName:"",updateItemName:"",groupId:-1,updateGroupId:-1,beAmount:!0,updateBeAmount:!1,desc:"",updateDesc:"",amountFormula:"",updateAmountFormula:"",loading:!1,dialogVisible:!1,dialogTitle:"编辑费用定义",multipleSelection:[],costItemDef:{id:"",name:"",groupId:"",beAmount:!1,amountFormula:"",desc:""},costItems:[],costGroups:[],formulaItemId:null,rules:{name:[{required:!0,message:"必填:费用定义名称",trigger:"blur"}],groupId:[{required:!0,message:"必填:请选择",trigger:"blur"}]}}},props:["state"]},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.showAddCostItemDefView}},[e._v("添加")]),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.costItems,size:"mini",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"80",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"groupId",label:"费用类别",formatter:e.formatCostGroup,width:"180",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{width:"120",label:"是否参与统计",prop:"beAmount",formatter:e.formatBeAmount,align:"left"}}),e._v(" "),n("el-table-column",{attrs:{width:"80",label:"计算公式",prop:"amountFormula",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"备注",prop:"desc",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n    ")])],1),e._v(" "),n("el-form",{ref:"addItemForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.costItemDef,rules:e.rules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"55%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"费用项名称:",prop:"name"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入新的费用项名称"},model:{value:e.costItemDef.name,callback:function(t){e.$set(e.costItemDef,"name",t)},expression:"costItemDef.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"费用分类:",prop:"group"}},[n("el-select",{attrs:{size:"mini",placeholder:"费用分类"},model:{value:e.costItemDef.groupId,callback:function(t){e.$set(e.costItemDef,"groupId",t)},expression:"costItemDef.groupId"}},e._l(e.costGroups,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{prop:"beAmount"}},[n("el-checkbox",{model:{value:e.costItemDef.beAmount,callback:function(t){e.$set(e.costItemDef,"beAmount",t)},expression:"costItemDef.beAmount"}},[e._v("参与总数统计")])],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"总数计算公式:",prop:"amountFormula"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"总数计算公式..."},model:{value:e.costItemDef.amountFormula,callback:function(t){e.$set(e.costItemDef,"amountFormula",t)},expression:"costItemDef.amountFormula"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",[n("el-select",{attrs:{size:"mini",placeholder:"添加公式参数"},on:{change:e.addFormulaVar},model:{value:e.formulaItemId,callback:function(t){e.formulaItemId=t},expression:"formulaItemId"}},e._l(e.costItems,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注:",prop:"desc"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini",placeholder:"备注..."},model:{value:e.costItemDef.desc,callback:function(t){e.$set(e.costItemDef,"desc",t)},expression:"costItemDef.desc"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addCostItemDef("addItemForm")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]},o=n("VU/8")(i,a,!1,null,null,null);t.default=o.exports},qNjJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{prjs:[],keywords:"",fileUploadBtnText:"导入数据",beginDateScope:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,prjTypes:[{id:1,name:"派单类"},{id:2,name:"实施类"},{id:3,name:"人月类"}],customs:[{id:1,name:"交通银行"},{id:2,name:"广东发展银行"}],customTreeData:[],deps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},budgetDialogVisible:!1,dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,showOrHideCustomPop:!1,showOrHideCustomPop2:!1,advSearchData:{name:"",customId:"",customName:"请选择客户",departmentId:"",departmentName:"请选择部门",prjTypeId:"",prjClassId:0,beginDateScope:""},prj:{id:-1,projectNo:"",name:"",simpleName:"",contractNo:"",prjTypeId:null,prjClassId:-1,departmentId:"",departmentName:"所属部门...",beginDate:"",endDate:"",customId:null,customName:"",userName:"",totalPeopleMonth:0,budgetPeopleMonth:0,contractAmount:0,costAmount:0,labourAmount:0,expenseAmount:0,labourBudget:0,expenseBudget:0},curPrjId:-1,prjBudget:{prjId:-1,prjName:"",prjManCostAvg:0,contractAmount:0,curYearAmount:0,budgets:[{year:2017,budgets:[{month:8,amount:0,manMonth:2,costAmount:0,realManMonth:0},{month:9,amount:0,manMonth:3,costAmount:0,realManMonth:0},{month:10,amount:0,manMonth:1,costAmount:0,realManMonth:0},{month:11,amount:0,manMonth:4,costAmount:0,realManMonth:0},{month:12,amount:0,manMonth:5,costAmount:0,realManMonth:0}]},{year:2018,budgets:[{month:1,amount:0,manMonth:3,costAmount:0,realManMonth:0},{month:2,amount:0,manMonth:4,costAmount:0,realManMonth:0},{month:3,amount:0,manMonth:1,costAmount:0,realManMonth:0},{month:4,amount:0,manMonth:2,costAmount:0,realManMonth:0},{month:5,amount:0,manMonth:6,costAmount:0,realManMonth:0}]}]},rules:{name:[{required:!0,message:"必填:项目名称",trigger:"blur"}],projectNo:[{required:!0,message:"必填:项目编号",trigger:"blur"}],departmentId:[{required:!0,message:"必填:所属部门",trigger:"change"}],customId:[{required:!0,message:"必填:所属客户",trigger:"change"}],beginDate:[{required:!0,message:"必填:启动日期",trigger:"blur"}],endDate:[{required:!0,message:"必填:结束日期",trigger:"blur"}]},budgetRules:{prjManCostAvg:[{required:!0,message:"不能为空",trigger:"blur"}]}}},mounted:function(){this.initData(),this.loadPrjs(),this.loadCustomTree(),this.loadDepTree()},methods:{fileUploadSuccess:function(e,t,n){e&&this.$message({type:e.status,message:e.msg}),this.loadEmps(),this.fileUploadBtnText="导入数据"},fileUploadError:function(e,t,n){this.$message({type:"error",message:"导入失败!"}),this.fileUploadBtnText="导入数据"},beforeFileUpload:function(e){this.fileUploadBtnText="正在导入"},exportEmps:function(){window.open("/employee/basic/exportEmp","_parent")},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyPrjData(),this.beginDateScope="",this.loadPrjs()},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyPrjData(),this.beginDateScope="",this.loadPrjs())},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyPrjs:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",n=0;n<e.multipleSelection.length;n++)t+=e.multipleSelection[n].id+",";e.doDelete(t)}).catch(function(){})},deletePrj:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/project/basic/prj/"+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){var n=e.data;t.$message({type:n.status,message:n.msg}),t.loadPrjs()}})},keywordsChange:function(e){""==e&&this.loadPrjs()},searchPrj:function(){this.loadPrjs()},currentChange:function(e){this.currentPage=e,this.loadPrjs()},loadCustomTree:function(){var e=this;this.getRequest("/custom/customs/-1").then(function(t){t&&200==t.status&&(e.customTreeData=t.data)})},loadDepTree:function(){var e=this;this.getRequest("/system/basic/dep/-1").then(function(t){t&&200==t.status&&(e.deps=t.data)})},loadPrjBudget:function(e){var t=this;t.curPrjId=e,t.tableLoading=!0,t.getRequest("/project/budget/manmonth/"+e).then(function(e){t.tableLoading=!1,console.log(e.status),e&&200==e.status?(t.sortPrjBudget(e.data),t.prjBudget=e.data):t.curPrjId=-1})},sortPrjBudget:function(e){if(null==e.amounts||0==e.amounts.length)return null;var t=new Array,n=e.amounts[0].year,i=0,a=0;console.log(n),t[i]=new Object,t[i].budgets=new Array,t[i].year=n;for(var o=0;o<e.amounts.length;o++)e.amounts[o].year!=n&&(a=0,i++,n=e.amounts[o].year,t[i]=new Object,t[i].budgets=new Array,t[i].year=n),t[i].budgets[a++]=e.amounts[o];e.budgets=t},loadPrjs:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/project/basic/prj?page="+this.currentPage+"&size=10&keywords="+this.keywords+"&politicId="+this.prj.politicId+"&nationId="+this.prj.nationId+"&posId="+this.prj.posId+"&jobLevelId="+this.prj.jobLevelId+"&engageForm="+this.prj.engageForm+"&departmentId="+this.prj.departmentId+"&beginDateScope="+this.beginDateScope).then(function(n){if(e.tableLoading=!1,n&&200==n.status){var i=n.data;t.prjs=i.prjs,t.totalCount=i.count}})},addPrj:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.prj.id?(t.tableLoading=!0,t.putRequest("/project/basic/prj",t.prj).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyPrjData(),n.loadPrjs()}})):(t.tableLoading=!0,t.postRequest("/project/basic/prj",t.prj).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyPrjData(),n.loadPrjs()}}))})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showCustomTree:function(){this.showOrHideCustomPop=!this.showOrHideCustomPop},handleCustomTreeNodeClick:function(e){this.prj.customName=e.name,this.prj.customId=e.id,this.showOrHideCustomPop=!1},showCustomTree2:function(){this.showOrHideCustomPop2=!this.showOrHideCustomPop2},handleCustomTreeNodeClick2:function(e){this.advSearchData.customName=e.name,this.advSearchData.customId=e.id,this.showOrHideCustomPop2=!1},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.prj.departmentName=e.name,this.prj.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.advSearchData.departmentName=e.name,this.advSearchData.departmentId=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},initData:function(){var e=this;this.getRequest("/project/basic/prj").then(function(t){if(t&&200==t.status){var n=t.data;e.nations=n.nations,e.politics=n.politics,e.prjs=n.prjs,e.positions=n.positions,e.joblevels=n.joblevels,e.prj.workID=n.workID}})},showEditPrjBudgetView:function(e){this.$router.push({name:"项目预算",params:{id:e.id,prjNo:e.prjNo,prjName:e.name}})},cancelBudgetEidt:function(){this.budgetDialogVisible=!1},savePrjBudget:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(t.prjBudget),t.postRequest("/project/budget/"+t.curPrjId,t.prjBudget).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyPrjData(),n.loadPrjs()}})})},showEditPrjView:function(e){console.log(e),this.dialogTitle="编辑项目信息",this.prj=e,this.prj.birthday=this.formatDate(e.birthday),this.prj.conversionTime=this.formatDate(e.conversionTime),this.prj.beginContract=this.formatDate(e.beginContract),this.prj.endContract=this.formatDate(e.endContract),this.prj.beginDate=this.formatDate(e.beginDate),this.prj.nationId=e.nation.id,this.prj.politicId=e.politicsStatus.id,this.prj.departmentId=e.department.id,this.prj.departmentName=e.department.name,this.prj.jobLevelId=e.jobLevel.id,this.prj.posId=e.position.id,delete this.prj.workAge,delete this.prj.notWorkDate,this.dialogVisible=!0},showAddPrjView:function(){this.dialogTitle="添加新项目",this.emptyPrjData(),this.dialogVisible=!0;var e=this;this.getRequest("/employee/basic/maxWorkID").then(function(t){t&&200==t.status&&(e.prj.workID=t.data)})},emptyPrjData:function(){this.prj={name:"",gender:"",birthday:"",idCard:"",wedlock:"",nationId:"",nativePlace:"",politicId:"",email:"",phone:"",address:"",departmentId:"",departmentName:"所属部门...",jobLevelId:"",posId:"",engageForm:"",tiptopDegree:"",specialty:"",school:"",beginDate:"",workState:"",workID:"",contractTerm:"",conversionTime:"",notWorkDate:"",beginContract:"",endContract:"",customId:null,customName:"",prjTypeId:null,workAge:""}}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[n("div",{staticStyle:{display:"inline"}},[n("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"项目名称搜索，记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchPrj(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchPrj}},[e._v("搜索\n          ")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[n("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n          ")])],1),e._v(" "),n("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[n("el-upload",{staticStyle:{display:"inline"},attrs:{"show-file-list":!1,accept:"application/vnd.ms-excel",action:"/project/basic/importPrj","on-success":e.fileUploadSuccess,"on-error":e.fileUploadError,disabled:"正在导入"==e.fileUploadBtnText,"before-upload":e.beforeFileUpload}},[n("el-button",{attrs:{size:"mini",type:"success",loading:"正在导入"==e.fileUploadBtnText}},[n("i",{staticClass:"fa fa-lg fa-level-up",staticStyle:{"margin-right":"5px"}}),e._v(e._s(e.fileUploadBtnText)+"\n            ")])],1),e._v(" "),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.exportEmps}},[n("i",{staticClass:"fa fa-lg fa-level-down",staticStyle:{"margin-right":"5px"}}),e._v("导出数据\n          ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.showAddPrjView}},[e._v("\n            添加项目\n          ")])],1)]),e._v(" "),n("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[n("div",[n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticStyle:{"margin-bottom":"10px",border:"1px","border-radius":"5px","border-style":"solid",padding:"15px","box-sizing":"border-box","border-color":"#20a0ff"}},[n("el-form",{attrs:{inline:!0,model:e.advSearchData}},[n("el-row",[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属客户:",prop:"customId"}},[n("el-popover",{attrs:{placement:"right",title:"请选择所属客户",trigger:"manual"},model:{value:e.showOrHideCustomPop2,callback:function(t){e.showOrHideCustomPop2=t},expression:"showOrHideCustomPop2"}},[n("el-tree",{attrs:{data:e.customTreeData,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleCustomTreeNodeClick2}}),e._v(" "),n("div",{staticStyle:{width:"230px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showCustomTree2},slot:"reference"},[e._v(e._s(e.advSearchData.customName)+"\n                    ")])],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"所属部门:",prop:"departmentName"}},[n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop2,callback:function(t){e.showOrHidePop2=t},expression:"showOrHidePop2"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick2}}),e._v(" "),n("div",{staticStyle:{width:"130px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree2},slot:"reference"},[e._v(e._s(e.advSearchData.departmentName)+"\n                    ")])],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"项目类型:"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择项目类型"},model:{value:e.advSearchData.prjTypeId,callback:function(t){e.$set(e.advSearchData,"prjTypeId",t)},expression:"advSearchData.prjTypeId"}},e._l(e.prjTypes,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{label:"项目分类:",prop:"prjClassId"}},[n("el-radio-group",{model:{value:e.advSearchData.prjClassId,callback:function(t){e.$set(e.advSearchData,"prjClassId",t)},expression:"advSearchData.prjClassId"}},[n("el-radio",{attrs:{label:"全部"}},[e._v("全部")]),e._v(" "),n("el-radio",{attrs:{label:"延续形"}},[e._v("延续形")]),e._v(" "),n("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"新项目"}},[e._v("新项目")])],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{label:"立项日期:",prop:"beginDateScope"}},[n("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.advSearchData.beginDateScope,callback:function(t){e.$set(e.advSearchData,"beginDateScope",t)},expression:"advSearchData.beginDateScope"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:5,offset:2}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchPrj}},[e._v("搜索")])],1)],1)],1)],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.prjs,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),n("el-table-column",{attrs:{prop:"customName",align:"left",fixed:"",label:"客户名称",width:"90"}}),e._v(" "),n("el-table-column",{attrs:{prop:"contractNo",width:"85",align:"left",label:"合同编号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"250"}}),e._v(" "),n("el-table-column",{attrs:{prop:"projectNo",label:"项目编号",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"签订日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"incomeYear",width:"100",label:"确认收入年份"}}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"开工日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"85",align:"left",label:"结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.birthday)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"department.name",align:"left",width:"100",label:"所属部门"}}),e._v(" "),n("el-table-column",{attrs:{prop:"amount",width:"80",align:"left",label:"合同金额"}}),e._v(" "),n("el-table-column",{attrs:{prop:"totalPeopleMonth",width:"80",align:"left",label:"人月总数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"budgetPeopleMonth",width:"80",align:"left",label:"预算人月总数"}}),e._v(" "),n("el-table-column",{attrs:{prop:"costAmount",width:"80",align:"left",label:"成本合计"}}),e._v(" "),n("el-table-column",{attrs:{prop:"labourAmount",width:"80",align:"left",label:"人工成本"}}),e._v(" "),n("el-table-column",{attrs:{prop:"expenseAmount",width:"80",align:"left",label:"费用成本"}}),e._v(" "),n("el-table-column",{attrs:{prop:"labourBudget",width:"80",align:"left",label:"人工预算"}}),e._v(" "),n("el-table-column",{attrs:{prop:"expenseBudget",width:"80",align:"left",label:"费用预算"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(n){e.showEditPrjView(t.row)}}},[e._v("编辑\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(n){e.showEditPrjBudgetView(t.row)}}},[e._v("项目预算\n                ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(n){e.deletePrj(t.row)}}},[e._v("删除\n                ")])]}}])})],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.prjs.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyPrjs}},[e._v("批量删除\n            ")]):e._e(),e._v(" "),n("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),n("el-form",{ref:"addPrjForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.prj,rules:e.rules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"项目名称:",prop:"name"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{size:"mini",placeholder:"请输入项目名称"},model:{value:e.prj.name,callback:function(t){e.$set(e.prj,"name",t)},expression:"prj.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目编号:",prop:"projectNo"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请输入项目编号"},model:{value:e.prj.projectNo,callback:function(t){e.$set(e.prj,"projectNo",t)},expression:"prj.projectNo"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属客户:",prop:"customId"}},[n("el-popover",{attrs:{placement:"right",title:"请选择所属客户",trigger:"manual"},model:{value:e.showOrHideCustomPop,callback:function(t){e.showOrHideCustomPop=t},expression:"showOrHideCustomPop"}},[n("el-tree",{attrs:{data:e.customTreeData,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleCustomTreeNodeClick}}),e._v(" "),n("div",{staticStyle:{width:"230px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showCustomTree},slot:"reference"},[e._v(e._s(e.prj.customName)+"\n                    ")])],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"所属部门:",prop:"departmentName"}},[n("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[n("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),n("div",{staticStyle:{width:"230px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[e._v(e._s(e.prj.departmentName)+"\n                    ")])],1)],1)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"项目类型:"}},[n("el-select",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请选择项目类型"},model:{value:e.prj.prjTypeId,callback:function(t){e.$set(e.prj,"prjTypeId",t)},expression:"prj.prjTypeId"}},e._l(e.prjTypes,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:9}},[n("el-form-item",{attrs:{label:"项目分类:",prop:"prjClassId"}},[n("el-radio-group",{model:{value:e.prj.prjClassId,callback:function(t){e.$set(e.prj,"prjClassId",t)},expression:"prj.prjClassId"}},[n("el-radio",{attrs:{label:"延续形"}},[e._v("延续形")]),e._v(" "),n("el-radio",{attrs:{label:"新项目"}},[e._v("新项目")])],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"启动日期:",prop:"beginDate"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"启动日期"},model:{value:e.prj.beginDate,callback:function(t){e.$set(e.prj,"beginDate",t)},expression:"prj.beginDate"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[n("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.prj.endDate,callback:function(t){e.$set(e.prj,"endDate",t)},expression:"prj.endDate"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.addPrj("addPrjForm")}}},[e._v("确 定")])],1)],1)],1)]),e._v(" "),n("el-form",{ref:"prjBudgetForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.prjBudget,rules:e.budgetRules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:"项目预算编辑","close-on-click-modal":!1,visible:e.budgetDialogVisible,width:"90%"},on:{"update:visible":function(t){e.budgetDialogVisible=t}}},[n("el-row",[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"项目名称:"}},[e._v("\n              "+e._s(e.prjBudget.prjName)+"\n              ")])],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目编号:"}},[e._v("\n                "+e._s(e.prjBudget.prjNo)+"\n              ")])],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目平均人月费用:",prop:"prjManCostAvg"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{size:"mini"},model:{value:e.prjBudget.prjManCostAvg,callback:function(t){e.$set(e.prjBudget,"prjManCostAvg",t)},expression:"prjBudget.prjManCostAvg"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目合同收入:",prop:"contractAmount"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{size:"mini"},model:{value:e.prjBudget.contractAmount,callback:function(t){e.$set(e.prjBudget,"contractAmount",t)},expression:"prjBudget.contractAmount"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"当年收入:",prop:"curYearAmount"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{size:"mini"},model:{value:e.prjBudget.curYearAmount,callback:function(t){e.$set(e.prjBudget,"curYearAmount",t)},expression:"prjBudget.curYearAmount"}})],1)],1)],1),e._v(" "),e._l(e.prjBudget.budgets,function(t){return n("div",{key:t.year},[[n("el-row",[n("el-col",{attrs:{span:20}},[n("h3",[e._v(e._s(t.year)+"年预算(单位：人月)")])])],1),e._v(" "),n("el-row",e._l(t.budgets,function(t){return n("el-col",{key:t.month,attrs:{span:5}},[n("div",{staticStyle:{"margin-bottom":"10px","margin-right":"5px"}},[n("span",{staticClass:"col-label"},[e._v(e._s(t.month)+"月:")]),e._v(" "),n("el-input",{staticClass:"col-input",attrs:{size:"mini"},model:{value:t.manMonth,callback:function(n){e.$set(t,"manMonth",n)},expression:"item.manMonth"}})],1)])}))]],2)}),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelBudgetEidt}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.savePrjBudget("prjBudgetForm")}}},[e._v("确 定")])],1)],2)],1)])],1)},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("zdVT")},null,null);t.default=o.exports},qihR:function(e,t){},sbZ9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={mounted:function(){console.log("ManMonth prjId:"+this.prjid),this.loadPrjBudget(this.prjid)},methods:{updatePosNameExec:function(){var e=this;if(this.isNotNullORBlank(this.updatePosName)){this.loading=!0;var t=this;this.putRequest("position"==this.state?"/system/basic/position":"/system/basic/joblevel",{name:this.updatePosName,id:this.updatePosId,titleLevel:this.updateTitleLevel}).then(function(n){if(t.loading=!1,n&&200==n.status){e.dialogVisible=!1;var i=n.data;t.$message({type:i.status,message:i.msg}),t.loadTableData()}})}else this.$message.warning("position"==this.state?"职位名称不能为空!":"职称名称不能为空!")},deleteMany:function(){var e=this,t=this;this.$confirm("删除"+this.multipleSelection.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t){e=e+t.id+","}),t.doDelete(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addPosition:function(){if(this.isNotNullORBlank(this.positionName))if("jobtitle"!=this.state||this.isNotNullORBlank(this.titleLevel)){var e=this;this.loading=!0,this.postRequest("position"==this.state?"/system/basic/position":"/system/basic/joblevel",{name:this.positionName,titleLevel:this.titleLevel}).then(function(t){if(e.loading=!1,t&&200==t.status){var n=t.data;e.$message({type:n.status,message:n.msg}),e.loadTableData(),e.positionName="",e.titleLevel=""}})}else this.$message.warning("请选择职称级别!");else this.$message.warning("position"==this.state?"职位名称不能为空!":"职称名称不能为空!")},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){this.updatePosName=t.name,this.updatePosId=t.id,this.updateTitleLevel=t.titleLevel,this.dialogVisible=!0},handleDelete:function(e,t){var n=this,i=this;this.$confirm("删除["+t.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(t.id)}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},doDelete:function(e){var t=this;t.loading=!0;var n="position"==this.state?"/system/basic/position/":"/system/basic/joblevel/";this.deleteRequest(n+e).then(function(e){t.loading=!1,e&&200==e.status&&t.loadTableData()})},loadPrjBudget:function(e){var t=this;t.curPrjId=e,t.tableLoading=!0,t.getRequest("/project/budget/manmonth/"+e).then(function(e){t.tableLoading=!1,console.log(e.status),e&&200==e.status?(t.sortPrjBudget(e.data),t.prjBudget=e.data):t.curPrjId=-1})},sortPrjBudget:function(e){if(null==e.amounts||0==e.amounts.length)return null;var t=new Array,n=e.amounts[0].year,i=0,a=0;console.log(n),t[i]=new Object,t[i].budgets=new Array,t[i].year=n;for(var o=0;o<e.amounts.length;o++)e.amounts[o].year!=n&&(a=0,i++,n=e.amounts[o].year,t[i]=new Object,t[i].budgets=new Array,t[i].year=n),t[i].budgets[a++]=e.amounts[o];e.budgets=t},loadTableData:function(){var e=this;this.loading=!0,this.getRequest("position"==this.state?"/system/basic/positions":"/system/basic/joblevels").then(function(t){e.loading=!1,t&&200==t.status&&(e.posData=t.data)})}},data:function(){return{loading:!1,multipleSelection:[],posData:[],prjBudget:{prjId:-1,prjName:"test",prjNo:"23-324",prjManCostAvg:0,contractAmount:0,curYearAmount:0,budgets:[{year:2017,budgets:[{month:8,amount:0,manMonth:2,costAmount:0,realManMonth:0},{month:9,amount:0,manMonth:3,costAmount:0,realManMonth:0},{month:10,amount:0,manMonth:1,costAmount:0,realManMonth:0},{month:11,amount:0,manMonth:4,costAmount:0,realManMonth:0},{month:12,amount:0,manMonth:5,costAmount:0,realManMonth:0}]},{year:2018,budgets:[{month:1,amount:0,manMonth:3,costAmount:0,realManMonth:0},{month:2,amount:0,manMonth:4,costAmount:0,realManMonth:0},{month:3,amount:0,manMonth:1,costAmount:0,realManMonth:0},{month:4,amount:0,manMonth:2,costAmount:0,realManMonth:0},{month:5,amount:0,manMonth:6,costAmount:0,realManMonth:0}]}]},budgetRules:{prjManCostAvg:[{required:!0,message:"不能为空",trigger:"blur"}]}}},props:["prjid"]},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"prjBudgetForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.prjBudget,rules:e.budgetRules}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目平均人月费用:",prop:"prjManCostAvg"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{size:"mini"},model:{value:e.prjBudget.prjManCostAvg,callback:function(t){e.$set(e.prjBudget,"prjManCostAvg",t)},expression:"prjBudget.prjManCostAvg"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"项目合同收入:",prop:"contractAmount"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{size:"mini"},model:{value:e.prjBudget.contractAmount,callback:function(t){e.$set(e.prjBudget,"contractAmount",t)},expression:"prjBudget.contractAmount"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"当年收入:",prop:"curYearAmount"}},[n("el-input",{staticStyle:{width:"130px"},attrs:{size:"mini"},model:{value:e.prjBudget.curYearAmount,callback:function(t){e.$set(e.prjBudget,"curYearAmount",t)},expression:"prjBudget.curYearAmount"}})],1)],1)],1),e._v(" "),e._l(e.prjBudget.budgets,function(t){return n("div",{key:t.year},[[n("el-row",[n("el-col",{attrs:{span:20}},[n("h3",[e._v(e._s(t.year)+"年预算(单位：人月)")])])],1),e._v(" "),n("el-row",e._l(t.budgets,function(t){return n("el-col",{key:t.month,attrs:{span:5}},[n("div",{staticStyle:{"margin-bottom":"10px","margin-right":"5px"}},[n("span",{staticClass:"col-label"},[e._v(e._s(t.month)+"月:")]),e._v(" "),n("el-input",{staticClass:"col-input",attrs:{size:"mini"},model:{value:t.manMonth,callback:function(n){e.$set(t,"manMonth",n)},expression:"item.manMonth"}})],1)])}))]],2)}),e._v(" "),n("div",{staticClass:"el-dialog__footer",staticStyle:{margin:"2px"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.savePrjBudget("prjBudgetForm")}}},[e._v("提 交")])],1)],2)])],1)},staticRenderFns:[]},o=n("VU/8")(i,a,!1,null,null,null);t.default=o.exports},ubks:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("\n    系统管理\n  ")])])}]},a=n("VU/8")(null,i,!1,null,null,null);t.default=a.exports},"ul1/":function(e,t){},utwD:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={mounted:function(){this.loadSettings()},methods:{loadSettings:function(){var e=this;console.log(this.editable),this.getRequest("/system/budget/settings").then(function(t){t&&200==t.status&&(e.tmpExpsData=t.data.costItems,e.costGroups=t.data.costGroups,console.log("cost settings load ok"),e.initData())})},loadData:function(e){var t=this;this.loading=!0,this.getRequest("/budget/cost/"+e+"/"+this.budgetTypeId).then(function(e){e&&200==e.status&&(t.budgets=e.data,console.log("cost load ok!"),t.initData())})},formatAmount1:function(e){console.log(e.index),console.log(e.row),console.log(e.column)},formatAmount:function(e,t,n){for(var i=t.property.split("."),a=e,o=0;o<i.length;o++)a=a[i[o]];return this.formatMoney(a,1)},initData:function(){if(0!=this.tmpExpsData.length&&0!=this.budgets.length){this.loading=!1,console.log("initData: ");for(var e=0;e<this.budgets.length;e++){var t=this.budgets[e],n=this.getCostItem(t.costItemId);console.log(n),this.$set(t,"amountFormula",n.amountFormula),this.$set(t,"beAmount",n.beAmount),this.$set(t,"name",n.name),this.$set(t,"groupId",n.groupId),this.$set(t,"desc",n.desc),this.$set(t,"sum",0);for(var i=0;i<12;i++)t.sum+=t.amounts[i].amount,this.$set(t.amounts[i],"editFlag",!1)}this.expenseItems=this.budgets,console.log("initData OK")}},getCostItem:function(e){for(var t=0;t<this.tmpExpsData.length;t++)if(this.tmpExpsData[t].id==e)return this.tmpExpsData[t];return null},initData1:function(){if(0!=this.tmpExpsData.length&&0!=this.budgets.length){this.loading=!1,console.log("initData: ");for(var e=0;e<this.tmpExpsData.length;e++){var t=this.getBudgetItem(this.tmpExpsData[e].id);t.amountFormula=this.tmpExpsData[e].amountFormula,t.beAmount=this.tmpExpsData[e].beAmount,this.$set(t,"sum",0);for(var n=0;n<12;n++)t.sum+=t.amounts[n].amount,this.$set(t.amounts[n],"editFlag",!1);this.tmpExpsData[e].budgetItem=t}this.expenseItems=this.tmpExpsData}},getBudgetItem:function(e){for(var t=0;t<this.budgets.length;t++)if(this.budgets[t].costItemId==e)return this.budgets[t];return null},formatExpenseGroup:function(e,t){for(var n=0;n<this.costGroups.length;n++)if(this.costGroups[n].id==e.groupId)return this.costGroups[n].name;return"unknow"},commitChange:function(){var e=this;this.postRequest("/budget/cost/"+this.budgetTypeId,this.expenseItems).then(function(t){if(e.treeLoading=!1,t&&200==t.status){var n=t.data;e.$message({type:n.status,message:"修改成功!"}),e.changed=!1}})},handleEdit:function(e,t){e.amounts[t].editFlag=!0,this.inputColumn1=e.amounts[t].amount},getSummaries:function(e){var t=[];t[0]="",t[1]="合计";for(var n=0;n<13;n++)t[2+n]=0;for(var i=0;i<this.expenseItems.length;i++)if(this.expenseItems[i].beAmount){for(n=0;n<12;n++)t[2+n]=t[2+n]+this.expenseItems[i].amounts[n].amount;t[14]=t[14]+this.expenseItems[i].sum}for(n=0;n<13;n++)t[2+n]=this.formatMoney(t[2+n],1);return t},handleSave:function handleSave(row,index){row.amounts[index].editFlag=!1,row.amounts[index].amount=parseFloat(this.inputColumn1);for(var tmp=0,tmp1=row.amounts,i=0;i<12;i++)tmp+=tmp1[i].amount;row.sum=tmp;for(var curId=row.costItemId,values=[],re=/#\d+/g,idx=0;idx<this.expenseItems.length;idx++)if(null!=this.expenseItems[idx].amountFormula){var tmpStr=this.expenseItems[idx].amountFormula.replace("$","#"),vals=tmpStr.match(re);if(null!=vals){for(var i=0;i<vals.length;i++)tmpStr=tmpStr.replace(vals[i],"values["+i+"]"),values[i]=this.getAmountValue(vals[i].substr(1),index);var tmpAmount=eval(tmpStr),sumAmount=this.expenseItems[idx].sum-this.expenseItems[idx].amounts[index].amount+tmpAmount;this.expenseItems[idx].amounts[index].amount=tmpAmount,this.expenseItems[idx].sum=sumAmount,this.changed=!0}}},getAmountValue:function(e,t){for(var n=0;n<this.expenseItems.length;n++)if(this.expenseItems[n].costItemId==e)return this.expenseItems[n].amounts[t].amount;return null},handleCancel:function(e,t){e.amounts[t].editFlag=!1;var n=e.amounts[t].amount;e.amounts[t].amount=n},handleMouseEnter:function(e,t,n,i){var a=t.property;!0===this.editable&&a>=1&&a<=12&&!e.amounts[a-1].editFlag&-1==e.refItem&&(n.children[0].children[0].children[1].style.color="black")},handleMouseOut:function(e,t,n,i){var a=t.property;!0===this.editable&&a>=1&&a<=12&&!e.amounts[a-1].editFlag&-1==e.refItem&&(n.children[0].children[0].children[1].style.color="#ffffff")}},data:function(){return{loading:!1,expenseItems:[],costGroups:[],budgets:[],tmpExpsData:[],tableLoading:!1,changed:!1,dialogVisible:!1,currentItemLabel:"",amount:0,editingRow:null,editingProp:"",tableTitles:[{title:"一月",idx:"1"},{title:"二月",idx:"2"},{title:"三月",idx:"3"},{title:"四月",idx:"4"},{title:"五月",idx:"5"},{title:"六月",idx:"6"},{title:"七月",idx:"7"},{title:"八月",idx:"8"},{title:"九月",idx:"9"},{title:"十月",idx:"10"},{title:"十一月",idx:"11"},{title:"十二月",idx:"12"}]}},props:["budgetTypeId","editable","depId"]}},wEda:function(e,t){},y19v:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{"text-align":"left"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.showAddBudgetTypeDialog}},[e._v("添加")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.bgTypeData,size:"mini",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"80",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"备注",width:"250",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[e.bgTypeData.length>0?n("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n    ")]):e._e()],1),e._v(" "),n("el-form",{ref:"addBudgetTypeForm",staticStyle:{margin:"0px",padding:"0px","padding-right":"30px"},attrs:{model:e.budgetType,"label-width":"150px","label-position":"right",rules:e.rules,size:"mini"}},[n("div",{staticStyle:{"text-align":"left"}},[n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form-item",{attrs:{label:"费用预算类别名称:",prop:"name"}},[n("el-input",{attrs:{size:"20",placeholder:"请输入新的预算类别名称..."},model:{value:e.budgetType.name,callback:function(t){e.$set(e.budgetType,"name",t)},expression:"budgetType.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注:",prop:"desc"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入新的备注..."},model:{value:e.budgetType.desc,callback:function(t){e.$set(e.budgetType,"desc",t)},expression:"budgetType.desc"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addBudgetType("addBudgetTypeForm")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]},a=n("VU/8")({mounted:function(){this.loadTableData()},methods:{addBudgetType:function(e){var t=this,n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.budgetType.id&&-1!=t.budgetType.id?(t.tableLoading=!0,t.putRequest("/system/budget/budgetType",t.budgetType).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyBudgetTypeData(),n.loadTableData()}})):(t.tableLoading=!0,t.postRequest("/system/budget/budgetType",t.budgetType).then(function(e){if(n.tableLoading=!1,e&&200==e.status){var t=e.data;n.$message({type:t.status,message:t.msg}),n.dialogVisible=!1,n.emptyBudgetTypeData(),n.loadTableData()}}))})},deleteMany:function(){var e=this,t=this;this.$confirm("删除"+this.multipleSelection.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t){e=e+t.id+","}),t.doDelete(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},emptyBudgetTypeData:function(){this.budgetType={id:-1,name:"",desc:""}},handleSelectionChange:function(e){this.multipleSelection=e},showAddBudgetTypeDialog:function(){this.dialogTitle="新加费用预算类别",this.emptyBudgetTypeData(),this.dialogVisible=!0},handleEdit:function(e,t){this.dialogTitle="编辑费用预算类别",this.budgetType=t,this.dialogVisible=!0},handleDelete:function(e,t){var n=this,i=this;this.$confirm("删除["+t.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(t.id)}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},doDelete:function(e){var t=this;t.loading=!0,this.deleteRequest("/system/budget/budgetType/"+e).then(function(e){t.loading=!1,e&&200==e.status&&t.loadTableData()})},loadTableData:function(){var e=this;this.loading=!0,this.getRequest("/system/budget/settings").then(function(t){e.loading=!1,t&&200==t.status&&(e.bgTypeData=t.data.budgetTypes)})}},data:function(){return{loading:!1,dialogVisible:!1,multipleSelection:[],bgTypeData:[],dialogTitle:"",budgetType:{id:-1,name:"",desc:""},rules:{name:[{required:!0,message:"必填:费用预算名称！",trigger:"blur"}]}}}},i,!1,null,null,null);t.default=a.exports},zdVT:function(e,t){}});
//# sourceMappingURL=0.b22f1e71ec44d03115e0.js.map